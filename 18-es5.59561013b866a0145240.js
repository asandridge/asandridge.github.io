function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,s=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{CKRj:function(e,t,n){"use strict";n.r(t),n.d(t,"TrainingPageModule",(function(){return Dn}));var s=n("c7TG"),i=n("tyNb"),r=n("ofXK"),c=n("3Pt+"),a=n("mrSG"),o=n("PqYM"),l=n("l5mm"),f=n("fXoL"),h=["slideElement"];function u(e,t){if(1&e){var n=f.Yb();f.Xb(0,"ion-icon",10),f.fc("click",(function(){return f.sc(n),f.hc().toggleOverview()})),f.Wb()}}var d=function(e){return{hidden:e}};function b(e,t){if(1&e){var n=f.Yb();f.Xb(0,"ion-icon",11),f.fc("click",(function(){return f.sc(n),f.hc().closeModal()})),f.Wb()}if(2&e){var s=f.hc();f.kc("ngClass",f.nc(1,d,s.hideQuit))}}function g(e,t){if(1&e&&(f.Xb(0,"ion-slide",12),f.Vb(1,"img",13),f.Xb(2,"div",14),f.wc(3),f.Wb(),f.Wb()),2&e){var n=t.$implicit;f.Kb(1),f.kc("src",n[0],f.tc),f.Kb(2),f.xc(n[1])}}function m(e,t){1&e&&f.Vb(0,"ion-icon",18)}function v(e,t){if(1&e){var n=f.Yb();f.Xb(0,"ion-icon",19),f.fc("click",(function(){f.sc(n);var e=f.hc().index;return f.hc(),f.rc(9).slideTo(e)})),f.Wb()}}function p(e,t){if(1&e&&(f.Xb(0,"span",15),f.vc(1,m,1,0,"ion-icon",16),f.vc(2,v,1,0,"ion-icon",17),f.Wb()),2&e){var n=t.index,s=f.hc();f.Kb(1),f.kc("ngIf",s.currentSlide==n),f.Kb(1),f.kc("ngIf",s.currentSlide!=n)}}var k,S={Start:[["assets/help-slides/start/0.png","Welcome to your CRD training. Please take a minute to review these slides and familiarize yourself with the training process."],["assets/help-slides/start/1.png","There are 8 levels to complete. You should complete one level per day, in about 10-15 minutes."],["assets/help-slides/start/2.png","In the learning task you will learn the day's names and faces, then you will use those faces to complete the challenges in the four training tasks."],["assets/help-slides/start/3.png","After passing the training tasks, you will complete two assessment tasks. Your level will increase after you finish."],["assets/help-slides/start/4.png","Before Level 1 and after Level 8 you will complete an additional assessment to estimate your overall progress."],["assets/help-slides/start/5.png","If you have questions about how to complete a task or what to do next, you can click the help icon in the upper-right corner."],["assets/help-slides/start/6.png","Your data will be used to further research of CRD and facial recognition. For more information about the research visit the About Us page."],["assets/help-slides/start/7.png","Should you need to review this information again, simply click the help icon in the upper right-hand corner of any help page."]],Overview:[["assets/help-slides/start/0.png","These slides will provide an overview of the training process."],["assets/help-slides/start/1.png","There are 8 levels to complete. You should complete one level per day, in about 10-15 minutes."],["assets/help-slides/start/2.png","In the learning task you will learn the day's names and faces, then you will use those faces to complete the challenges in the four training tasks."],["assets/help-slides/start/3.png","After passing the training tasks, you will complete two assessment tasks. Your level will increase after you finish."],["assets/help-slides/start/4.png","Before Level 1 and after Level 8 you will complete an additional assessment to estimate your overall progress."],["assets/help-slides/start/5.png","If you have questions about how to complete a task or what to do next, you can click the help icon in the upper-right corner."],["assets/help-slides/start/6.png","Your data will be used to further research of CRD and facial recognition. For more information about the research visit the About Us page."]],"Meet Today's Faces":[["assets/help-slides/learning/0.png","Memorize the eight name-face pairs you are shown; they will be the basis of your daily training."],["assets/help-slides/learning/1.png","You can come back to this module at any time after finishing."]],"Name and Face":[["assets/help-slides/name-face/0.png","For each of the names you've seen before, you'll be asked to match the appropriate face."],["assets/help-slides/name-face/1.png","You'll get a point for each face you match correctly."],["assets/help-slides/name-face/2.png","Whenever you guess incorrectly, you'll be shown the correct answer as well as the two names."]],"Who's New?":[["assets/help-slides/whos-new/0.png","Select the face that you haven't yet seen today, and that wasn't part of the learning task."],["assets/help-slides/whos-new/1.png","You'll get a point for each face you guess correctly."],["assets/help-slides/whos-new/2.png","Whenever you guess incorrectly, you'll be shown the correct answer."]],"Memory Match":[["assets/help-slides/memory-match/0.png","Tap to show the faces and begin the timer."],["assets/help-slides/memory-match/1.png","You will have 10 seconds to memorize the placement of as many face pairs as you can."],["assets/help-slides/memory-match/2.png","After the timer is up, click the cards to match the pairs. When you correctly match a pair, they will be revealed."],["assets/help-slides/memory-match/3.png","Correct matches award 4 points, while incorrect matches deduct 1 point."]],Shuffle:[["assets/help-slides/shuffle/0.png","Tap to show the faces and begin the timer."],["assets/help-slides/shuffle/1.png","You will have 10 seconds to memorize the placement of the faces."],["assets/help-slides/shuffle/2.png","After the timer is up, click cards to swap their positions. Tap 'Done' when you think the positions are correct."],["assets/help-slides/shuffle/3.png","For an incorrect solution, incorrect cards will be colored red. You will be awarded a point for each correct card."],["assets/help-slides/shuffle/4.png","You can toggle between your solution and the correct solution with the toggle at the bottom."]],"Forced Choice":[["assets/help-slides/forced-choice/0.png","Tap to show the face and begin the timer."],["assets/help-slides/forced-choice/1.png","You will have 3 seconds to memorize the face."],["assets/help-slides/forced-choice/2.png","After the timer is up select the face that you saw."],["assets/help-slides/forced-choice/3.png","You will receive a point for each correct answer."]],"Same-Different":[["assets/help-slides/same-different/0.png","Tap to show the face and begin the timer."],["assets/help-slides/same-different/1.png","You will have 3 seconds to memorize the face."],["assets/help-slides/same-different/2.png","After the timer is up, decide whether the face is the same."],["assets/help-slides/same-different/3.png","You will receive a point for each correct answer."]],"Training Tasks":[["assets/help-slides/training/0.png","Welcome to the training tasks. You can revisit the learning task however often you need with the bottom left-hand button."],["assets/help-slides/training/1.png","When you complete a task, you can see your highest score. You must get at least 75% to pass each task, and can do them any number of times."],["assets/help-slides/training/2.png","After passing every task, you can progress to the daily assessment tasks with the bottom right-hand button. You will not be able to come back today after moving on."]],"Assessment Tasks":[["assets/help-slides/assessment/0.png","The daily assessment tasks track your learning progress. You cannot redo them."]],Finish:[["assets/help-slides/finish/0.png","You are done for the day, come back tomorrow for your next training. You can see your training history on the history page."]],"Pre-Assessment":[["assets/help-slides/pre-post/0.png","Welcome to your pre-assessment. This is a one-time test; it will provide a baseline for your current CRD."],["assets/help-slides/same-different/0.png","Tap to show the face and begin the timer."],["assets/help-slides/same-different/1.png","You will have 3 seconds to memorize the face."],["assets/help-slides/same-different/2.png","After the timer is up, decide whether the face is the same."],["assets/help-slides/pre-post/1.png","This test consists of 30 questions, so set aside a few minutes to complete it."],["assets/help-slides/finish/0.png","When you have finished you can officially begin your training in Level 1."]],"Post-Assessment":[["assets/help-slides/pre-post/0.png","Welcome to your post-assessment. This is your final test; after this, your participation in this research will be complete."],["assets/help-slides/pre-post/1.png","This test consists of 30 questions, so set aside a few minutes to complete it."]]},I=((k=function(){function e(t,n){_classCallCheck(this,e),this.modalController=t,this.navParams=n}return _createClass(e,[{key:"ngOnInit",value:function(){this.task=this.navParams.data.paramTask,this.displayFirst=this.navParams.data.displayFirst,this.slides=S[this.task],this.currentSlide=0,this.showOverview=!1;for(var e=[],t=0;t<this.slides.length;t++)e.push(new Image),e[e.length-1].src=this.slides[t][0];this.hideQuit=!1,this.displayFirst&&this.slides.length>1&&(this.hideQuit=!0)}},{key:"closeModal",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.dismiss();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"changeSlide",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.slideElement.getActiveIndex();case 2:this.currentSlide=e.sent,this.currentSlide==this.slides.length-1&&(this.hideQuit=!1);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"toggleOverview",value:function(){if(this.slideElement.slideTo(0),this.showOverview)this.showOverview=!1,this.ngOnInit();else{this.showOverview=!0,this.task="Overview",this.slides=S[this.task];for(var e=[],t=0;t<this.slides.length;t++)e.push(new Image),e[e.length-1].src=this.slides[t][0]}}}]),e}()).\u0275fac=function(e){return new(e||k)(f.Ub(s.I),f.Ub(s.J))},k.\u0275cmp=f.Ob({type:k,selectors:[["app-help-modal"]],viewQuery:function(e,t){var n;1&e&&f.Bc(h,!0),2&e&&f.qc(n=f.gc())&&(t.slideElement=n.first)},inputs:{firstDisplayed:"firstDisplayed"},decls:13,vars:8,consts:[[2,"--background","dodgerblue","--color","white"],["lines","none",2,"font-size","3vh","margin-top","5%","text-align","center","--background","dodgerblue","--color","white",3,"swipedown"],["slot","start","color","dark","name","arrow-back","style","height: 3vh",3,"click",4,"ngIf"],["slot","end","color","dark","name","help-circle",2,"height","3vh",3,"ngClass","click"],["slot","start","color","dark","name","close-circle","style","margin-right: 10px; height: 3vh",3,"ngClass","click",4,"ngIf"],[2,"height","80%",3,"ionSlideWillChange"],["slideElement",""],["style","height: 100%; width: 100%; display: flex; flex-direction: column; justify-content: space-evenly; padding-left: 5%; padding-right: 5%",4,"ngFor","ngForOf"],[2,"text-align","center","font-size","3vh"],["style","margin: 0 auto",4,"ngFor","ngForOf"],["slot","start","color","dark","name","arrow-back",2,"height","3vh",3,"click"],["slot","start","color","dark","name","close-circle",2,"margin-right","10px","height","3vh",3,"ngClass","click"],[2,"height","100%","width","100%","display","flex","flex-direction","column","justify-content","space-evenly","padding-left","5%","padding-right","5%"],[3,"src"],[2,"display","flex","align-items","center","flex-shrink","2","margin-left","5%","margin-right","5%","font-size","5vw"],[2,"margin","0 auto"],["color","dark","name","radio-button-on",4,"ngIf"],["color","dark","name","radio-button-off",3,"click",4,"ngIf"],["color","dark","name","radio-button-on"],["color","dark","name","radio-button-off",3,"click"]],template:function(e,t){1&e&&(f.Xb(0,"ion-content",0),f.Xb(1,"ion-item",1),f.fc("swipedown",(function(){return t.closeModal()})),f.Xb(2,"ion-label"),f.Xb(3,"b"),f.wc(4),f.Wb(),f.Wb(),f.vc(5,u,1,0,"ion-icon",2),f.Xb(6,"ion-icon",3),f.fc("click",(function(){return t.toggleOverview()})),f.Wb(),f.vc(7,b,1,3,"ion-icon",4),f.Wb(),f.Xb(8,"ion-slides",5,6),f.fc("ionSlideWillChange",(function(){return t.changeSlide()})),f.vc(10,g,4,2,"ion-slide",7),f.Wb(),f.Xb(11,"div",8),f.vc(12,p,3,2,"span",9),f.Wb(),f.Wb()),2&e&&(f.Kb(4),f.xc(t.task),f.Kb(1),f.kc("ngIf",t.showOverview),f.Kb(1),f.kc("ngClass",f.nc(6,d,"Start"==t.task||"Overview"==t.task||t.hideQuit)),f.Kb(1),f.kc("ngIf",!t.showOverview),f.Kb(3),f.kc("ngForOf",t.slides),f.Kb(2),f.kc("ngForOf",t.slides))},directives:[s.j,s.o,s.p,r.j,s.m,r.h,s.B,r.i,s.A],styles:["ion-item[_ngcontent-%COMP%]{--background:#1e90ff}div[_ngcontent-%COMP%]{color:#fff;text-align:center}img[_ngcontent-%COMP%]{height:55vh;width:auto;margin:0 auto;border-radius:5%}.hidden[_ngcontent-%COMP%]{visibility:hidden}"]}),k),w=n("l7GE"),y=n("ZUHj");function O(e){return function(t){return t.lift(new E(e))}}var C,E=function(){function e(t){_classCallCheck(this,e),this.notifier=t}return _createClass(e,[{key:"call",value:function(e,t){var n=new T(e),s=Object(y.a)(n,this.notifier);return s&&!n.seenValue?(n.add(s),t.subscribe(n)):n}}]),e}(),T=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var s;return _classCallCheck(this,n),(s=t.call(this,e)).seenValue=!1,s}return _createClass(n,[{key:"notifyNext",value:function(e,t,n,s,i){this.seenValue=!0,this.complete()}},{key:"notifyComplete",value:function(){}}]),n}(w.a),R=n("MTcp"),F=n("Xy44"),x=n("tk/3"),W=((C=function(){function e(t){_classCallCheck(this,e),this.http=t,this.scores_url="https://crossfacerecognition.herokuapp.com/tasks/",this.pre_url="https://crossfacerecognition.herokuapp.com/preassessment/",this.post_url="https://crossfacerecognition.herokuapp.com/postassessment/",this.shuffle=0,this.memory=0,this.whosnew=0,this.nameface=0,this.forcedchoice=0,this.samedifferent=0,this.pre_score=0,this.post_score=0}return _createClass(e,[{key:"setScores",value:function(e,t){var n=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Black";return new Promise((function(i,r){n.level=e,n.race=s,n.nameface=t[0],n.whosnew=t[1],n.memory=t[2],n.shuffle=t[3],n.forcedchoice=t[4],n.samedifferent=t[5],n.body={level:n.level,race:n.race,shuffle:n.shuffle,memory:n.memory,whosnew:n.whosnew,nameface:n.nameface,forcedchoice:n.forcedchoice,samedifferent:n.samedifferent},i()}))}},{key:"putScores",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Black";return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function s(){var i;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return i={headers:new x.c({"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+localStorage.getItem("token")})},s.next=3,this.setScores(e,t,n);case 3:console.log("Sent: ",JSON.stringify(this.body)),this.http.post(this.scores_url,this.body,i).subscribe((function(e){console.log("Response: ",e)}),(function(e){console.log("Error: ",e)}));case 5:case"end":return s.stop()}}),s,this)})))}},{key:"submitTaskScores",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Black";this.putScores(e,t,n)}},{key:"setPre",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Black";return new Promise((function(s,i){t.pre_score=e,t.race=n,t.body={score:t.pre_score,race:t.race},s()}))}},{key:"submitPreAssessment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Black";return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s={headers:new x.c({"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+localStorage.getItem("token")})},n.next=3,this.setPre(e,t);case 3:console.log("Sent to pre: ",JSON.stringify(this.body)),this.http.put(this.pre_url,this.body,s).subscribe((function(e){console.log("Response: ",e),console.log("status: ",e.status)}),(function(e){console.log("Error: ",e)}));case 5:case"end":return n.stop()}}),n,this)})))}},{key:"setPost",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Black";return new Promise((function(s,i){t.post_score=e,t.race=n,t.body={score:t.post_score,race:t.race},s()}))}},{key:"submitPostAssessment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Black";return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s={headers:new x.c({"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+localStorage.getItem("token")})},n.next=3,this.setPost(e,t);case 3:console.log("Sent to post: ",JSON.stringify(this.body)),this.http.put(this.post_url,this.body,s).subscribe((function(e){console.log("Response: ",e),console.log("status: ",e.status)}),(function(e){console.log("Error: ",e)}));case 5:case"end":return n.stop()}}),n,this)})))}}]),e}()).\u0275fac=function(e){return new(e||C)(f.bc(x.a))},C.\u0275prov=f.Qb({token:C,factory:C.\u0275fac,providedIn:"root"}),C),X=n("Bg0J"),M=function(e){return{opacity:e}};function A(e,t){if(1&e){var n=f.Yb();f.Xb(0,"ion-slide",10),f.Xb(1,"ion-card",11),f.Xb(2,"ion-icon",12),f.fc("click",(function(){return f.sc(n),f.hc(),f.rc(6).slidePrev()})),f.Wb(),f.Xb(3,"div"),f.Xb(4,"div",13),f.Vb(5,"img",14),f.Wb(),f.Xb(6,"div",15),f.Xb(7,"div",16),f.Xb(8,"p",17),f.wc(9),f.Wb(),f.Wb(),f.Wb(),f.Wb(),f.Xb(10,"ion-icon",18),f.fc("click",(function(){return f.sc(n),f.hc(),f.rc(6).slideNext()})),f.Wb(),f.Wb(),f.Wb()}if(2&e){var s=t.$implicit,i=t.index,r=f.hc();f.Kb(2),f.kc("ngStyle",f.nc(4,M,0==r.progress?"0.2":"1")),f.Kb(3),f.kc("src",s,f.tc),f.Kb(4),f.xc(r.setNames[i]),f.Kb(1),f.kc("ngStyle",f.nc(6,M,r.progress==r.facePaths.length-1?"0.2":"1"))}}function K(e,t){1&e&&(f.Xb(0,"ion-button",19),f.wc(1,"Finish"),f.Wb())}function j(e,t){if(1&e){var n=f.Yb();f.Xb(0,"ion-button",20),f.fc("click",(function(){return f.sc(n),f.hc().finished.emit()})),f.wc(1,"Finish"),f.Wb()}}var P,N=((P=function(){function e(){_classCallCheck(this,e),this.finished=new f.s,this.progress=0,this.progressPercent=0,this.seenAll=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"changeCard",value:function(e){"next"==e?this.progress++:this.progress--,this.seenAll||(this.progressPercent=this.progress/(this.facePaths.length-1)),7==this.progress&&(this.seenAll=!0)}}]),e}()).\u0275fac=function(e){return new(e||P)},P.\u0275cmp=f.Ob({type:P,selectors:[["app-learning-task"]],inputs:{setNames:"setNames",facePaths:"facePaths"},outputs:{finished:"finished"},decls:11,vars:4,consts:[["id","learningView"],[2,"margin-top","0px",3,"value"],[1,"flex-slide"],[2,"font-size","7vw","color","white","text-align","center","margin-top","5%"],[2,"width","100%",3,"ionSlideNextStart","ionSlidePrevStart"],["slideElement",""],["style","text-align: center",4,"ngFor","ngForOf"],[2,"text-align","center","height","7%","margin-bottom","5%"],["color","success","style","height: 100%","disabled","",4,"ngIf"],["color","success","style","height: 100%",3,"click",4,"ngIf"],[2,"text-align","center"],[2,"display","flex","justify-content","center","align-items","center"],["color","dark","name","arrow-back",2,"margin-right","calc((100% - 220px) / 2)","font-size","150%",3,"ngStyle","click"],[1,"imgContainer"],["id","faceImg",3,"src"],[1,"nameContainer"],["id","nameDisplay"],["id","nameText"],["color","dark","name","arrow-forward",2,"margin-left","calc((100% - 220px) / 2)","font-size","150%",3,"ngStyle","click"],["color","success","disabled","",2,"height","100%"],["color","success",2,"height","100%",3,"click"]],template:function(e,t){1&e&&(f.Xb(0,"ion-content",0),f.Vb(1,"ion-progress-bar",1),f.Xb(2,"div",2),f.Xb(3,"div",3),f.wc(4,"Memorize the faces and names"),f.Wb(),f.Xb(5,"ion-slides",4,5),f.fc("ionSlideNextStart",(function(){return t.changeCard("next")}))("ionSlidePrevStart",(function(){return t.changeCard("back")})),f.vc(7,A,11,8,"ion-slide",6),f.Wb(),f.Xb(8,"div",7),f.vc(9,K,2,0,"ion-button",8),f.vc(10,j,2,0,"ion-button",9),f.Wb(),f.Wb(),f.Wb()),2&e&&(f.Kb(1),f.lc("value",t.progressPercent),f.Kb(6),f.kc("ngForOf",t.facePaths),f.Kb(2),f.kc("ngIf",!t.seenAll),f.Kb(1),f.kc("ngIf",t.seenAll))},directives:[s.j,s.u,s.B,r.i,r.j,s.A,s.g,s.m,r.k,s.e],styles:["#learningView[_ngcontent-%COMP%]{--background:grey}ion-card[_ngcontent-%COMP%]{width:90%;height:auto;text-align:center;border-radius:2%;box-shadow:6px 4px 5px rgba(0,0,0,.7);display:block;margin-left:auto;margin-right:auto;margin-bottom:5px;background-color:#dcdcdc}ion-button[_ngcontent-%COMP%]{width:80%;height:100%;padding:0;margin:5px}ion-icon[_ngcontent-%COMP%]{font-size:100%}.imgContainer[_ngcontent-%COMP%]{height:230px;width:auto;text-align:center!important;display:flex;flex-direction:column;justify-content:center}#faceImg[_ngcontent-%COMP%]{margin:0 auto;height:210px;width:160px;display:inline-block}.nameContainer[_ngcontent-%COMP%]{height:70px;width:100%;margin-bottom:10px;background-image:url(nametag.9fffc7bfd1a8708802bc.png);background-position:50%;background-size:auto 100%;background-repeat:no-repeat}.nameContainer[_ngcontent-%COMP%]   #nameDisplay[_ngcontent-%COMP%]{height:100%;position:relative}.nameContainer[_ngcontent-%COMP%]   #nameDisplay[_ngcontent-%COMP%]   #nameText[_ngcontent-%COMP%]{color:#1e90ff;font-weight:700;font-size:large;margin:5px;position:absolute;left:50%;transform:translate(-55%);bottom:15%}"]}),P);function L(e,t){if(1&e&&(f.Xb(0,"div",5),f.wc(1),f.Wb()),2&e){var n=f.hc();f.Kb(1),f.Ac("You need a score of at least ",n.length*n.minTrainScore,"/",n.length," (",100*n.minTrainScore,"%) to pass this module")}}function _(e,t){if(1&e){var n=f.Yb();f.Xb(0,"ion-button",6),f.fc("click",(function(){return f.sc(n),f.hc().finished.emit(0)})),f.wc(1,"Retry"),f.Wb()}}function Y(e,t){if(1&e){var n=f.Yb();f.Xb(0,"ion-button",6),f.fc("click",(function(){return f.sc(n),f.hc().finished.emit(1)})),f.Vb(1,"ion-icon",7),f.wc(2," \xa0 "),f.Vb(3,"ion-icon",7),f.Wb()}if(2&e){var s=f.hc();f.Kb(1),f.kc("src",s.replay_icon),f.Kb(2),f.kc("src",s.face_icon)}}var D,V=((D=function(){function e(){_classCallCheck(this,e),this.finished=new f.s,this.minTrainScore=.75,this.replay_icon="assets/icon/replay.svg",this.face_icon="assets/icon/face.svg"}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"failed",value:function(){return this.score<this.length*this.minTrainScore&&!this.assessment}}]),e}()).\u0275fac=function(e){return new(e||D)},D.\u0275cmp=f.Ob({type:D,selectors:[["app-score-page"]],inputs:{score:"score",length:"length",assessment:"assessment"},outputs:{finished:"finished"},decls:10,vars:6,consts:[[1,"flex-slide"],[1,"header"],["class","subheader","style","margin: 5%",4,"ngIf"],[3,"click",4,"ngIf"],[3,"color","click"],[1,"subheader",2,"margin","5%"],[3,"click"],[3,"src"]],template:function(e,t){1&e&&(f.Xb(0,"div",0),f.Xb(1,"div"),f.Xb(2,"div",1),f.wc(3),f.Wb(),f.vc(4,L,2,3,"div",2),f.vc(5,_,2,0,"ion-button",3),f.vc(6,Y,4,2,"ion-button",3),f.Vb(7,"br"),f.Xb(8,"ion-button",4),f.fc("click",(function(){return t.finished.emit(2)})),f.wc(9,"Finish"),f.Wb(),f.Wb(),f.Wb()),2&e&&(f.Kb(3),f.zc("Your score: ",t.score,"/",t.length,""),f.Kb(1),f.kc("ngIf",t.failed()),f.Kb(1),f.kc("ngIf",t.failed()),f.Kb(1),f.kc("ngIf",t.failed()),f.Kb(2),f.kc("color",t.failed()?"danger":"success"))},directives:[r.j,s.e,s.m],styles:["ion-button[_ngcontent-%COMP%]{height:8vh}"]}),D),z=["slideElement"];function H(e,t){if(1&e&&(f.Xb(0,"span"),f.Xb(1,"div",7),f.Xb(2,"b"),f.wc(3),f.Wb(),f.Wb(),f.Xb(4,"div",8),f.wc(5,"+1"),f.Wb(),f.Wb()),2&e){var n=f.hc();f.Kb(3),f.zc("Score: ",n.score,"/",n.progressPercent*n.taskLength,"")}}function B(e,t){if(1&e&&(f.Xb(0,"div",16),f.wc(1,"Who is "),f.Xb(2,"b"),f.wc(3),f.Wb(),f.wc(4,"?"),f.Wb()),2&e){var n=f.hc().index,s=f.hc();f.Kb(3),f.xc(s.slideInfo[n].correctName)}}function q(e,t){1&e&&(f.Xb(0,"div",16),f.wc(1,"Correct!"),f.Wb())}function U(e,t){1&e&&(f.Xb(0,"div",16),f.wc(1,"Incorrect!"),f.Wb())}function Z(e,t){if(1&e&&f.Vb(0,"img",21),2&e){var n=f.hc().index,s=f.hc().index,i=f.hc();f.kc("src",i.slideInfo[s].faces[n],f.tc)}}var G=function(e,t){return{"selected-wrong-card":e,"disabled-card":t}};function J(e,t){if(1&e){var n=f.Yb();f.Xb(0,"div",17),f.Xb(1,"ion-card",18),f.fc("click",(function(){f.sc(n);var e=t.index,s=f.hc().index,i=f.hc();return i.selectFace(i.slideInfo[s].faces[e])})),f.vc(2,Z,1,1,"img",19),f.Wb(),f.Xb(3,"div",20),f.wc(4),f.Wb(),f.Wb()}if(2&e){var s=t.index,i=f.hc().index,r=f.hc();f.Kb(1),f.kc("button",!r.showFeedback())("ngClass",f.oc(4,G,r.showSelected(s)&&i==r.currentSlide,r.showDisabled(s)&&i==r.currentSlide)),f.Kb(1),f.kc("ngIf",i<=r.currentSlide),f.Kb(2),f.xc(i==r.currentSlide?r.getName(s):"")}}function Q(e,t){if(1&e&&f.Vb(0,"img",21),2&e){var n=f.hc().index,s=f.hc().index,i=f.hc();f.kc("src",i.slideInfo[s].faces[n+3],f.tc)}}function $(e,t){if(1&e){var n=f.Yb();f.Xb(0,"div",17),f.Xb(1,"ion-card",18),f.fc("click",(function(){f.sc(n);var e=t.index,s=f.hc().index,i=f.hc();return i.selectFace(i.slideInfo[s].faces[e+3])})),f.vc(2,Q,1,1,"img",19),f.Wb(),f.Xb(3,"div",20),f.wc(4),f.Wb(),f.Wb()}if(2&e){var s=t.index,i=f.hc().index,r=f.hc();f.Kb(1),f.kc("button",!r.showFeedback())("ngClass",f.oc(4,G,r.showSelected(s+3)&&i==r.currentSlide,r.showDisabled(s+3)&&i==r.currentSlide)),f.Kb(1),f.kc("ngIf",i<=r.currentSlide),f.Kb(2),f.xc(i==r.currentSlide?r.getName(s+3):"")}}var ee=function(){return[]};function te(e,t){if(1&e&&(f.Xb(0,"ion-slide"),f.Xb(1,"div",9),f.vc(2,B,5,1,"div",10),f.vc(3,q,2,0,"div",10),f.vc(4,U,2,0,"div",10),f.Xb(5,"div"),f.Xb(6,"div",11),f.vc(7,J,5,7,"div",12),f.Wb(),f.Xb(8,"div",13),f.vc(9,$,5,7,"div",12),f.Wb(),f.Wb(),f.Xb(10,"ion-item",14),f.Xb(11,"ion-label"),f.wc(12,"Swipe to Continue"),f.Wb(),f.Vb(13,"ion-icon",15),f.Wb(),f.Wb(),f.Wb()),2&e){var n=t.index,s=f.hc();f.Kb(2),f.kc("ngIf",n!=s.currentSlide||!s.showFeedback()),f.Kb(1),f.kc("ngIf",s.showFeedback()&&s.slideInfo[n].stage==s.Stage.CORRECT),f.Kb(1),f.kc("ngIf",s.showFeedback()&&s.slideInfo[n].stage==s.Stage.INCORRECT),f.Kb(3),f.kc("ngForOf",f.mc(5,ee).constructor(3)),f.Kb(2),f.kc("ngForOf",f.mc(6,ee).constructor(3))}}var ne,se=function(e,t,n){return{default:e,success:t,failure:n}},ie=function(e){return e[e.SELECT=0]="SELECT",e[e.CORRECT=1]="CORRECT",e[e.INCORRECT=2]="INCORRECT",e}({}),re=((ne=function(){function e(){_classCallCheck(this,e),this.finished=new f.s,this.Stage=ie,this.numberOfOptions=6}return _createClass(e,[{key:"ngOnInit",value:function(){this.score=0,this.currentSlide=0,this.progressPercent=0,this.fadeIn=Object(R.h)(),this.changeScore=Object(R.h)(),this.taskLength=this.facePaths.length,this.shuffledNames=[];for(var e=0;e<this.taskLength;e++)this.shuffledNames.push(this.setNames[e]);for(var t=this.taskLength-1;t>0;t-=1){var n=Math.floor(Math.random()*(t+1)),s=this.shuffledNames[t];this.shuffledNames[t]=this.shuffledNames[n],this.shuffledNames[n]=s}this.slideInfo=[];for(var i=0;i<this.taskLength;i++)this.slideInfo.push({correctName:this.shuffledNames[i],correctFace:this.facePaths[this.setNames.indexOf(this.shuffledNames[i])],selectedFace:null,faces:this.getSlideFaces(i),stage:ie.SELECT})}},{key:"ngAfterViewInit",value:function(){this.slideElement.lockSwipes(!0)}},{key:"finish",value:function(e){this.finished.emit([this.score,e]),0==e&&(this.ngOnInit(),this.slideElement.lockSwipes(!1),this.slideElement.slideTo(0),this.slideElement.lockSwipes(!0))}},{key:"selectFace",value:function(e){var t=this;if(this.slideInfo[this.currentSlide].stage==ie.SELECT){this.slideInfo[this.currentSlide].selectedFace=e,e==this.slideInfo[this.currentSlide].correctFace?(this.score++,this.slideInfo[this.currentSlide].stage=ie.CORRECT,this.changeScore=Object(R.h)().addElement(document.querySelectorAll(".score-change")).fill("none").duration(2e3).keyframes([{offset:0,transform:"translateY(0%)"},{offset:.05,transform:"translateY(100%)"},{offset:.1,transform:"translateY(200%)"},{offset:.3,transform:"translateY(200%)"},{offset:.5,transform:"translateY(200%)"},{offset:.7,transform:"translateY(200%)"},{offset:.9,transform:"translateY(200%)"},{offset:.95,transform:"translateY(100%)"},{offset:1,transform:"translateY(0%)"}]),this.changeScore.play()):this.slideInfo[this.currentSlide].stage=ie.INCORRECT,this.progressPercent=(this.currentSlide+1)/this.taskLength,this.slideElement.lockSwipes(!1),this.slideElement.lockSwipeToPrev(!0);var n=this.currentSlide;Object(o.a)(1e3).subscribe((function(){return Object(a.b)(t,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.fadeIn=Object(R.h)().addElement(document.querySelectorAll(".footer")).fill("none").duration(500).fromTo("opacity","0","0.75"),e.t0=n==this.currentSlide,!e.t0){e.next=6;break}return e.next=5,this.fadeIn.play();case 5:Array.from(document.getElementsByClassName("footer"))[this.currentSlide].style.opacity=".75";case 6:case"end":return e.stop()}}),e,this)})))}))}}},{key:"getSlideFaces",value:function(e){for(var t=[],n=0;n<this.numberOfOptions-1;n++){for(var s=Math.floor(Math.random()*this.taskLength);t.indexOf(this.facePaths[s])>-1||this.facePaths[s]==this.facePaths[this.setNames.indexOf(this.shuffledNames[e])];)s=Math.floor(Math.random()*this.taskLength);t.push(this.facePaths[s])}var i=Math.floor(Math.random()*this.numberOfOptions);return t.splice(i,0,this.facePaths[this.setNames.indexOf(this.shuffledNames[e])]),t}},{key:"showDisabled",value:function(e){return this.showFeedback()&&this.slideInfo[this.currentSlide].correctFace!=this.slideInfo[this.currentSlide].faces[e]}},{key:"showSelected",value:function(e){return this.showFeedback()&&this.slideInfo[this.currentSlide].faces[e]!=this.slideInfo[this.currentSlide].correctFace&&this.slideInfo[this.currentSlide].faces[e]==this.slideInfo[this.currentSlide].selectedFace}},{key:"getName",value:function(e){return!this.showFeedback()||this.showDisabled(e)&&!this.showSelected(e)?"  ":this.setNames[this.facePaths.indexOf(this.slideInfo[this.currentSlide].faces[e])]}},{key:"showFeedback",value:function(){return!this.scoreCardDisplayed()&&(this.slideInfo[this.currentSlide].stage==ie.CORRECT||this.slideInfo[this.currentSlide].stage==ie.INCORRECT)}},{key:"scoreCardDisplayed",value:function(){return this.currentSlide>=this.taskLength}},{key:"changeSlide",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.slideElement.getActiveIndex();case 2:if(e.t0=e.sent,e.t1=this.currentSlide,!(e.t0>e.t1)){e.next=16;break}return e.next=7,this.slideElement.getActiveIndex();case 7:return this.currentSlide=e.sent,e.next=10,this.slideElement.lockSwipes(!0);case 10:return e.next=12,this.changeScore.stop();case 12:return e.next=14,this.fadeIn.stop();case 14:for(t=Array.from(document.getElementsByClassName("footer")),n=0;n<t.length;n++)t[n].style.opacity="0";case 16:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||ne)},ne.\u0275cmp=f.Ob({type:ne,selectors:[["app-name-face"]],viewQuery:function(e,t){var n;1&e&&f.Bc(z,!0),2&e&&f.qc(n=f.gc())&&(t.slideElement=n.first)},inputs:{setNames:"setNames",facePaths:"facePaths"},outputs:{finished:"finished"},decls:8,vars:11,consts:[[3,"ngClass"],[2,"margin-top","0px",3,"value"],[4,"ngIf"],[3,"ionSlideDidChange"],["slideElement",""],[4,"ngFor","ngForOf"],[3,"score","length","assessment","finished"],[1,"score-banner"],[1,"score-change"],[1,"flex-slide"],["class","prompt",4,"ngIf"],[2,"display","flex","justify-content","center"],["style","margin-left: 10px; margin-right: 10px",4,"ngFor","ngForOf"],[2,"display","flex","justify-content","center","margin-top","10px"],["lines","none",1,"footer"],["slot","end","color","medium","name","arrow-back",2,"margin-top","10px"],[1,"prompt"],[2,"margin-left","10px","margin-right","10px"],[1,"grid-card",3,"button","ngClass","click"],[3,"src",4,"ngIf"],[2,"height","25px","color","white"],[3,"src"]],template:function(e,t){1&e&&(f.Xb(0,"ion-content",0),f.Vb(1,"ion-progress-bar",1),f.vc(2,H,6,2,"span",2),f.Xb(3,"ion-slides",3,4),f.fc("ionSlideDidChange",(function(){return t.changeSlide()})),f.vc(5,te,14,7,"ion-slide",5),f.Xb(6,"ion-slide"),f.Xb(7,"app-score-page",6),f.fc("finished",(function(e){return t.finish(e)})),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e&&(f.kc("ngClass",f.pc(7,se,!t.showFeedback(),t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.CORRECT,t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.INCORRECT)),f.Kb(1),f.lc("value",t.progressPercent),f.Kb(1),f.kc("ngIf",!t.scoreCardDisplayed()),f.Kb(3),f.kc("ngForOf",t.slideInfo),f.Kb(2),f.kc("score",t.score)("length",t.taskLength)("assessment",!1))},directives:[s.j,r.h,s.u,r.j,s.B,r.i,s.A,V,s.o,s.p,s.m,s.g],styles:["ion-card[_ngcontent-%COMP%]{text-align:center;height:110px;width:80px;margin:0}ion-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px;width:75px;margin-left:3px;margin-top:5px}"]}),ne),ce=["slideElement"];function ae(e,t){if(1&e&&(f.Xb(0,"span"),f.Xb(1,"div",7),f.Xb(2,"b"),f.wc(3),f.Wb(),f.Wb(),f.Xb(4,"div",8),f.wc(5,"+1"),f.Wb(),f.Wb()),2&e){var n=f.hc();f.Kb(3),f.zc("Score: ",n.score,"/",n.progressPercent*n.taskLength,"")}}function oe(e,t){1&e&&(f.Xb(0,"div",15),f.wc(1,"Who didn't you see today?"),f.Wb())}function le(e,t){1&e&&(f.Xb(0,"div",15),f.wc(1,"Correct!"),f.Wb())}function fe(e,t){1&e&&(f.Xb(0,"div",15),f.wc(1,"Incorrect!"),f.Wb())}function he(e,t){if(1&e&&f.Vb(0,"img",16),2&e){var n=f.hc().index,s=f.hc();f.kc("src",s.slideInfo[n].faces[0],f.tc)}}function ue(e,t){if(1&e&&f.Vb(0,"img",16),2&e){var n=f.hc().index,s=f.hc();f.kc("src",s.slideInfo[n].faces[1],f.tc)}}function de(e,t){if(1&e&&f.Vb(0,"img",16),2&e){var n=f.hc().index,s=f.hc();f.kc("src",s.slideInfo[n].faces[2],f.tc)}}function be(e,t){if(1&e&&f.Vb(0,"img",16),2&e){var n=f.hc().index,s=f.hc();f.kc("src",s.slideInfo[n].faces[3],f.tc)}}var ge=function(e,t){return{"selected-wrong-card":e,"disabled-card":t}};function me(e,t){if(1&e){var n=f.Yb();f.Xb(0,"ion-slide"),f.Xb(1,"div",9),f.vc(2,oe,2,0,"div",10),f.vc(3,le,2,0,"div",10),f.vc(4,fe,2,0,"div",10),f.Xb(5,"div"),f.Xb(6,"div"),f.Xb(7,"ion-card",11),f.fc("click",(function(){f.sc(n);var e=t.index,s=f.hc();return s.selectFace(s.slideInfo[e].faces[0])})),f.vc(8,he,1,1,"img",12),f.Wb(),f.Xb(9,"ion-card",11),f.fc("click",(function(){f.sc(n);var e=t.index,s=f.hc();return s.selectFace(s.slideInfo[e].faces[1])})),f.vc(10,ue,1,1,"img",12),f.Wb(),f.Wb(),f.Xb(11,"div"),f.Xb(12,"ion-card",11),f.fc("click",(function(){f.sc(n);var e=t.index,s=f.hc();return s.selectFace(s.slideInfo[e].faces[2])})),f.vc(13,de,1,1,"img",12),f.Wb(),f.Xb(14,"ion-card",11),f.fc("click",(function(){f.sc(n);var e=t.index,s=f.hc();return s.selectFace(s.slideInfo[e].faces[3])})),f.vc(15,be,1,1,"img",12),f.Wb(),f.Wb(),f.Wb(),f.Xb(16,"ion-item",13),f.Xb(17,"ion-label"),f.wc(18,"Swipe to Continue"),f.Wb(),f.Vb(19,"ion-icon",14),f.Wb(),f.Wb(),f.Wb()}if(2&e){var s=t.index,i=f.hc();f.Kb(2),f.kc("ngIf",s!=i.currentSlide||!i.showFeedback()),f.Kb(1),f.kc("ngIf",i.showFeedback()&&i.slideInfo[s].stage==i.Stage.CORRECT),f.Kb(1),f.kc("ngIf",i.showFeedback()&&i.slideInfo[s].stage==i.Stage.INCORRECT),f.Kb(3),f.kc("button",!i.showFeedback())("ngClass",f.oc(15,ge,i.showSelected(0)&&s==i.currentSlide,i.showDisabled(0)&&s==i.currentSlide)),f.Kb(1),f.kc("ngIf",s<=i.currentSlide),f.Kb(1),f.kc("button",!i.showFeedback())("ngClass",f.oc(18,ge,i.showSelected(1)&&s==i.currentSlide,i.showDisabled(1)&&s==i.currentSlide)),f.Kb(1),f.kc("ngIf",s<=i.currentSlide),f.Kb(2),f.kc("button",!i.showFeedback())("ngClass",f.oc(21,ge,i.showSelected(2)&&s==i.currentSlide,i.showDisabled(2)&&s==i.currentSlide)),f.Kb(1),f.kc("ngIf",s<=i.currentSlide),f.Kb(1),f.kc("button",!i.showFeedback())("ngClass",f.oc(24,ge,i.showSelected(3)&&s==i.currentSlide,i.showDisabled(3)&&s==i.currentSlide)),f.Kb(1),f.kc("ngIf",s<=i.currentSlide)}}var ve,pe=function(e,t,n){return{default:e,success:t,failure:n}},ke=function(e){return e[e.SELECT=0]="SELECT",e[e.CORRECT=1]="CORRECT",e[e.INCORRECT=2]="INCORRECT",e}({}),Se=((ve=function(){function e(){_classCallCheck(this,e),this.finished=new f.s,this.Stage=ke,this.numberOfOptions=4}return _createClass(e,[{key:"ngOnInit",value:function(){this.score=0,this.currentSlide=0,this.progressPercent=0,this.fadeIn=Object(R.h)(),this.changeScore=Object(R.h)(),this.taskLength=this.newFacePaths.length,this.shuffledFaces=[];for(var e=0;e<this.taskLength;e++)this.shuffledFaces.push(this.newFacePaths[e]);for(var t=this.taskLength-1;t>0;t-=1){var n=Math.floor(Math.random()*(t+1)),s=this.shuffledFaces[t];this.shuffledFaces[t]=this.shuffledFaces[n],this.shuffledFaces[n]=s}this.slideInfo=[];for(var i=0;i<this.taskLength;i++)this.slideInfo.push({correctFace:this.shuffledFaces[i],selectedFace:null,faces:this.getSlideFaces(i),stage:ke.SELECT})}},{key:"ngAfterViewInit",value:function(){this.slideElement.lockSwipes(!0)}},{key:"finish",value:function(e){this.finished.emit([this.score,e]),0==e&&(this.ngOnInit(),this.slideElement.lockSwipes(!1),this.slideElement.slideTo(0),this.slideElement.lockSwipes(!0))}},{key:"selectFace",value:function(e){var t=this;if(this.slideInfo[this.currentSlide].stage==ke.SELECT){this.slideInfo[this.currentSlide].selectedFace=e,e==this.slideInfo[this.currentSlide].correctFace?(this.score++,this.slideInfo[this.currentSlide].stage=ke.CORRECT,this.changeScore=Object(R.h)().addElement(document.querySelectorAll(".score-change")).fill("none").duration(2e3).keyframes([{offset:0,transform:"translateY(0%)"},{offset:.05,transform:"translateY(100%)"},{offset:.1,transform:"translateY(200%)"},{offset:.3,transform:"translateY(200%)"},{offset:.5,transform:"translateY(200%)"},{offset:.7,transform:"translateY(200%)"},{offset:.9,transform:"translateY(200%)"},{offset:.95,transform:"translateY(100%)"},{offset:1,transform:"translateY(0%)"}]),this.changeScore.play()):this.slideInfo[this.currentSlide].stage=ke.INCORRECT,this.progressPercent=(this.currentSlide+1)/this.taskLength,this.slideElement.lockSwipes(!1),this.slideElement.lockSwipeToPrev(!0);var n=this.currentSlide;Object(o.a)(1e3).subscribe((function(){return Object(a.b)(t,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n==this.currentSlide,!e.t0){e.next=6;break}return this.fadeIn=Object(R.h)().addElement(document.querySelectorAll(".footer")).fill("none").duration(500).fromTo("opacity","0","0.75"),e.next=5,this.fadeIn.play();case 5:Array.from(document.getElementsByClassName("footer"))[this.currentSlide].style.opacity=".75";case 6:case"end":return e.stop()}}),e,this)})))}))}}},{key:"getSlideFaces",value:function(e){for(var t=[],n=0;n<this.numberOfOptions-1;n++){for(var s=Math.floor(Math.random()*this.taskLength);t.indexOf(this.facePaths[s])>-1;)s=Math.floor(Math.random()*this.taskLength);t.push(this.facePaths[s])}var i=Math.floor(Math.random()*this.numberOfOptions);return t.splice(i,0,this.shuffledFaces[e]),t}},{key:"showDisabled",value:function(e){return this.showFeedback()&&this.slideInfo[this.currentSlide].correctFace!=this.slideInfo[this.currentSlide].faces[e]}},{key:"showSelected",value:function(e){return this.showFeedback()&&this.slideInfo[this.currentSlide].faces[e]!=this.slideInfo[this.currentSlide].correctFace&&this.slideInfo[this.currentSlide].faces[e]==this.slideInfo[this.currentSlide].selectedFace}},{key:"showFeedback",value:function(){return!this.scoreCardDisplayed()&&(this.slideInfo[this.currentSlide].stage==ke.CORRECT||this.slideInfo[this.currentSlide].stage==ke.INCORRECT)}},{key:"scoreCardDisplayed",value:function(){return this.currentSlide>=this.taskLength}},{key:"changeSlide",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.slideElement.getActiveIndex();case 2:if(e.t0=e.sent,e.t1=this.currentSlide,!(e.t0>e.t1)){e.next=16;break}return e.next=7,this.slideElement.getActiveIndex();case 7:return this.currentSlide=e.sent,e.next=10,this.slideElement.lockSwipes(!0);case 10:return e.next=12,this.changeScore.stop();case 12:return e.next=14,this.fadeIn.stop();case 14:for(t=Array.from(document.getElementsByClassName("footer")),n=0;n<t.length;n++)t[n].style.opacity="0";case 16:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||ve)},ve.\u0275cmp=f.Ob({type:ve,selectors:[["app-whos-new"]],viewQuery:function(e,t){var n;1&e&&f.Bc(ce,!0),2&e&&f.qc(n=f.gc())&&(t.slideElement=n.first)},inputs:{facePaths:"facePaths",newFacePaths:"newFacePaths"},outputs:{finished:"finished"},decls:8,vars:11,consts:[[3,"ngClass"],[2,"margin-top","0px",3,"value"],[4,"ngIf"],[3,"ionSlideDidChange"],["slideElement",""],[4,"ngFor","ngForOf"],[3,"score","length","assessment","finished"],[1,"score-banner"],[1,"score-change"],[1,"flex-slide"],["class","prompt",4,"ngIf"],[1,"grid-card",3,"button","ngClass","click"],[3,"src",4,"ngIf"],["lines","none",1,"footer"],["slot","end","color","medium","name","arrow-back"],[1,"prompt"],[3,"src"]],template:function(e,t){1&e&&(f.Xb(0,"ion-content",0),f.Vb(1,"ion-progress-bar",1),f.vc(2,ae,6,2,"span",2),f.Xb(3,"ion-slides",3,4),f.fc("ionSlideDidChange",(function(){return t.changeSlide()})),f.vc(5,me,20,27,"ion-slide",5),f.Xb(6,"ion-slide"),f.Xb(7,"app-score-page",6),f.fc("finished",(function(e){return t.finish(e)})),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e&&(f.kc("ngClass",f.pc(7,pe,!t.showFeedback(),t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.CORRECT,t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.INCORRECT)),f.Kb(1),f.lc("value",t.progressPercent),f.Kb(1),f.kc("ngIf",!t.scoreCardDisplayed()),f.Kb(3),f.kc("ngForOf",t.slideInfo),f.Kb(2),f.kc("score",t.score)("length",t.taskLength)("assessment",!1))},directives:[s.j,r.h,s.u,r.j,s.B,r.i,s.A,V,s.g,s.o,s.p,s.m],styles:[""]}),ve),Ie=n("R0Ic"),we=["slideElement"];function ye(e,t){if(1&e&&(f.Xb(0,"span"),f.Xb(1,"div",14),f.Xb(2,"b"),f.wc(3),f.Wb(),f.Wb(),f.Xb(4,"div",15),f.wc(5),f.Wb(),f.Wb()),2&e){var n=f.hc();f.Kb(3),f.zc("Score: ",n.score,"/",n.progressPercent*n.taskLength,""),f.Kb(2),f.xc(n.stage==n.Stage.CORRECT?"+4":"-1")}}function Oe(e,t){if(1&e){var n=f.Yb();f.Xb(0,"div",16),f.fc("click",(function(){return f.sc(n),f.hc().startMemorizeTimer()})),f.Xb(1,"div",17),f.wc(2," Tap to reveal "),f.Wb(),f.Wb()}if(2&e){var s=f.hc();f.kc("@fadeInOut",s.stage==s.Stage.START?"visible":"invisible")}}function Ce(e,t){if(1&e&&(f.Xb(0,"div",18),f.wc(1),f.Wb()),2&e){var n=f.hc();f.Kb(1),f.yc("Memorize the face placement: ",n.memorizeTime,"")}}function Ee(e,t){if(1&e&&(f.Xb(0,"div",18),f.wc(1,"Memorize the face placement: "),f.Xb(2,"span",19),f.wc(3),f.Wb(),f.Wb()),2&e){var n=f.hc();f.Kb(2),f.kc("@countdown",n.timeRemaining%2==0?"active":"inactive"),f.Kb(1),f.xc(n.timeRemaining)}}function Te(e,t){1&e&&(f.Xb(0,"div",18),f.wc(1,"Hold the faces in your mind..."),f.Wb())}function Re(e,t){1&e&&(f.Xb(0,"div",18),f.wc(1,"Match the faces"),f.Wb())}function Fe(e,t){1&e&&(f.Xb(0,"div",18),f.wc(1,"Correct!"),f.Wb())}function xe(e,t){1&e&&(f.Xb(0,"div",18),f.wc(1,"Incorrect!"),f.Wb())}function We(e,t){if(1&e&&f.Vb(0,"img",23),2&e){var n=f.hc().index,s=f.hc();f.kc("src",s.stage==s.Stage.MASK?s.mask:s.randomFaces[n],f.tc)}}var Xe=function(e){return{"selected-card":e}};function Me(e,t){if(1&e){var n=f.Yb();f.Xb(0,"div",20),f.Xb(1,"ion-card",21),f.fc("click",(function(){f.sc(n);var e=t.index;return f.hc().clickFace(e)})),f.vc(2,We,1,1,"img",22),f.Wb(),f.Wb()}if(2&e){var s=t.index,i=f.hc();f.Kb(1),f.kc("button",i.stage==i.Stage.SELECT||i.stage==i.Stage.CORRECT||i.stage==i.Stage.INCORRECT)("ngClass",f.nc(3,Xe,i.selectedFace==s)),f.Kb(1),f.kc("ngIf",i.imageIsDisplayed(s))}}function Ae(e,t){if(1&e&&f.Vb(0,"img",23),2&e){var n=f.hc().index,s=f.hc();f.kc("src",s.stage==s.Stage.MASK?s.mask:s.randomFaces[n+4],f.tc)}}function Ke(e,t){if(1&e){var n=f.Yb();f.Xb(0,"div",20),f.Xb(1,"ion-card",21),f.fc("click",(function(){f.sc(n);var e=t.index;return f.hc().clickFace(e+4)})),f.vc(2,Ae,1,1,"img",22),f.Wb(),f.Wb()}if(2&e){var s=t.index,i=f.hc();f.Kb(1),f.kc("button",i.stage==i.Stage.SELECT||i.stage==i.Stage.CORRECT||i.stage==i.Stage.INCORRECT)("ngClass",f.nc(3,Xe,i.selectedFace==s+4)),f.Kb(1),f.kc("ngIf",i.imageIsDisplayed(s+4))}}function je(e,t){if(1&e&&f.Vb(0,"img",23),2&e){var n=f.hc().index,s=f.hc();f.kc("src",s.stage==s.Stage.MASK?s.mask:s.randomFaces[n+8],f.tc)}}function Pe(e,t){if(1&e){var n=f.Yb();f.Xb(0,"div",20),f.Xb(1,"ion-card",21),f.fc("click",(function(){f.sc(n);var e=t.index;return f.hc().clickFace(e+8)})),f.vc(2,je,1,1,"img",22),f.Wb(),f.Wb()}if(2&e){var s=t.index,i=f.hc();f.Kb(1),f.kc("button",i.stage==i.Stage.SELECT||i.stage==i.Stage.CORRECT||i.stage==i.Stage.INCORRECT)("ngClass",f.nc(3,Xe,i.selectedFace==s+8)),f.Kb(1),f.kc("ngIf",i.imageIsDisplayed(s+8))}}function Ne(e,t){if(1&e&&f.Vb(0,"img",23),2&e){var n=f.hc().index,s=f.hc();f.kc("src",s.stage==s.Stage.MASK?s.mask:s.randomFaces[n+12],f.tc)}}function Le(e,t){if(1&e){var n=f.Yb();f.Xb(0,"div",20),f.Xb(1,"ion-card",21),f.fc("click",(function(){f.sc(n);var e=t.index;return f.hc().clickFace(e+12)})),f.vc(2,Ne,1,1,"img",22),f.Wb(),f.Wb()}if(2&e){var s=t.index,i=f.hc();f.Kb(1),f.kc("button",i.stage==i.Stage.SELECT||i.stage==i.Stage.CORRECT||i.stage==i.Stage.INCORRECT)("ngClass",f.nc(3,Xe,i.selectedFace==s+12)),f.Kb(1),f.kc("ngIf",i.imageIsDisplayed(s+12))}}var _e,Ye=function(e,t,n){return{default:e,success:t,failure:n}},De=function(){return[]},Ve=function(e){return e[e.START=0]="START",e[e.MEMORIZE=1]="MEMORIZE",e[e.MASK=2]="MASK",e[e.SELECT=3]="SELECT",e[e.CORRECT=4]="CORRECT",e[e.INCORRECT=5]="INCORRECT",e}({}),ze=((_e=function(){function e(){_classCallCheck(this,e),this.finished=new f.s,this.Stage=Ve,this.mask="assets/background_imgs/mask1.png",this.memorizeTime=10,this.taskLength=32}return _createClass(e,[{key:"ngOnInit",value:function(){this.stage=Ve.START,this.score=0,this.promise=0,this.progressPercent=0,this.selectedFace=null,this.correctFaces=[],this.incorrectFaces=[],this.firstSlide=!0,this.changeScore=Object(R.h)(),this.randomFaces=[];for(var e=0;e<this.facePaths.length;e++)this.randomFaces.push(this.facePaths[e]),this.randomFaces.push(this.facePaths[e]);for(var t=this.randomFaces.length-1;t>0;t-=1){var n=Math.floor(Math.random()*(t+1)),s=this.randomFaces[t];this.randomFaces[t]=this.randomFaces[n],this.randomFaces[n]=s}}},{key:"ngAfterViewInit",value:function(){this.slideElement.lockSwipes(!0)}},{key:"ngOnDestroy",value:function(){this.interval&&this.interval.unsubscribe(),this.timer&&this.timer.unsubscribe()}},{key:"finish",value:function(e){this.finished.emit([this.score,e]),0==e&&(this.ngOnInit(),this.slideElement.lockSwipes(!1),this.slideElement.slideTo(0),this.slideElement.lockSwipes(!0))}},{key:"clickFace",value:function(e){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.stage!=Ve.START&&this.stage!=Ve.MEMORIZE&&this.stage!=Ve.MASK,!t.t0){t.next=25;break}if(this.stage!=Ve.CORRECT&&this.stage!=Ve.INCORRECT||(this.promise++,this.selectedFace=null,this.resetSelected()),t.t1=this.correctFaces.indexOf(this.randomFaces[e])<0&&e!=this.selectedFace,!t.t1){t.next=25;break}if(null!=this.selectedFace){t.next=9;break}this.selectedFace=e,t.next=25;break;case 9:if(this.randomFaces[e]!=this.randomFaces[this.selectedFace]){t.next=19;break}return this.correctFaces.push(this.randomFaces[e]),this.progressPercent=this.correctFaces.length/this.facePaths.length,this.score+=this.taskLength/this.facePaths.length,this.stage=Ve.CORRECT,this.correctFaces.length==this.facePaths.length&&(this.score=Math.ceil(this.score),this.slideElement.lockSwipes(!1),this.revealFooter()),t.next=17,this.waitForFeedback();case 17:t.next=25;break;case 19:return this.incorrectFaces.push(this.selectedFace),this.incorrectFaces.push(e),this.score=this.score>=1?this.score-1:0,this.stage=Ve.INCORRECT,t.next=25,this.waitForFeedback();case 25:case"end":return t.stop()}}),t,this)})))}},{key:"imageIsDisplayed",value:function(e){return this.stage==Ve.MEMORIZE||this.stage==Ve.MASK||this.incorrectFaces.indexOf(e)>-1||this.correctFaces.indexOf(this.randomFaces[e])>-1||this.selectedFace==e}},{key:"resetSelected",value:function(){this.incorrectFaces=[],this.stage=Ve.SELECT,this.changeScore.stop()}},{key:"waitForFeedback",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.selectedFace=null,this.stage!=Ve.INCORRECT&&this.stage!=Ve.CORRECT||(this.changeScore=Object(R.h)().addElement(document.querySelectorAll(".score-change")).fill("none").duration(2e3).keyframes([{offset:0,transform:"translateY(0%)"},{offset:.05,transform:"translateY(100%)"},{offset:.1,transform:"translateY(200%)"},{offset:.3,transform:"translateY(200%)"},{offset:.5,transform:"translateY(200%)"},{offset:.7,transform:"translateY(200%)"},{offset:.9,transform:"translateY(200%)"},{offset:.95,transform:"translateY(100%)"},{offset:1,transform:"translateY(0%)"}]),this.changeScore.play()),t=this.promise,e.next=4,new Promise((function(e){return setTimeout(e,2e3)}));case 4:t==this.promise&&this.resetSelected();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"startMemorizeTimer",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.stage==Ve.START&&(this.timeRemaining=this.memorizeTime,this.stage=Ve.MEMORIZE,this.timer=Object(o.a)(1e3*this.timeRemaining).subscribe((function(){t.startMaskTimer()})),this.interval=Object(l.a)(1e3).pipe(O(Object(o.a)(1e3*this.timeRemaining))).subscribe((function(){return Object(a.b)(t,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.timeRemaining--;case 1:case"end":return e.stop()}}),e,this)})))})));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"startMaskTimer",value:function(){var e=this;this.stage=Ve.MASK,this.timer=Object(o.a)(2e3).subscribe((function(){e.stage=Ve.SELECT}))}},{key:"scoreCardDisplayed",value:function(){return!this.firstSlide}},{key:"revealFooter",value:function(){var e=this;this.timer=Object(o.a)(500).subscribe((function(){return Object(a.b)(e,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(R.h)().addElement(document.querySelectorAll(".footer")).fill("none").duration(500).fromTo("opacity","0","0.75"),e.next=3,t.play();case 3:Array.from(document.getElementsByClassName("footer"))[0].style.opacity="0.75";case 4:case"end":return e.stop()}}),e)})))}))}}]),e}()).\u0275fac=function(e){return new(e||_e)},_e.\u0275cmp=f.Ob({type:_e,selectors:[["app-memory-match"]],viewQuery:function(e,t){var n;1&e&&f.Bc(we,!0),2&e&&f.qc(n=f.gc())&&(t.slideElement=n.first)},inputs:{facePaths:"facePaths"},outputs:{finished:"finished"},decls:28,vars:25,consts:[[3,"ngClass"],[2,"margin-top","0px",3,"value"],[4,"ngIf"],["class","overlay","button","",3,"click",4,"ngIf"],[3,"ionSlideDidChange","ionSlideReachStart","ionSlideReachEnd"],["slideElement",""],[1,"flex-slide"],["class","prompt-small",4,"ngIf"],[2,"text-align","center"],[2,"display","flex","justify-content","center"],["style","margin: 10px",4,"ngFor","ngForOf"],["lines","none",1,"footer"],["slot","end","color","dark","name","arrow-back"],[3,"score","length","assessment","finished"],[1,"score-banner"],[1,"score-change",2,"right","12vw"],["button","",1,"overlay",3,"click"],[1,"overlay-content"],[1,"prompt-small"],[1,"time-left"],[2,"margin","10px"],[3,"button","ngClass","click"],[3,"src",4,"ngIf"],[3,"src"]],template:function(e,t){1&e&&(f.Xb(0,"ion-content",0),f.Vb(1,"ion-progress-bar",1),f.vc(2,ye,6,3,"span",2),f.vc(3,Oe,3,1,"div",3),f.Xb(4,"ion-slides",4,5),f.fc("ionSlideDidChange",(function(){return t.ngAfterViewInit(),t.resetSelected()}))("ionSlideReachStart",(function(){return t.firstSlide=!0}))("ionSlideReachEnd",(function(){return t.firstSlide=!1})),f.Xb(6,"ion-slide",6),f.vc(7,Ce,2,1,"div",7),f.vc(8,Ee,4,2,"div",7),f.vc(9,Te,2,0,"div",7),f.vc(10,Re,2,0,"div",7),f.vc(11,Fe,2,0,"div",7),f.vc(12,xe,2,0,"div",7),f.Xb(13,"div",8),f.Xb(14,"div",9),f.vc(15,Me,3,5,"div",10),f.Wb(),f.Xb(16,"div",9),f.vc(17,Ke,3,5,"div",10),f.Wb(),f.Xb(18,"div",9),f.vc(19,Pe,3,5,"div",10),f.Wb(),f.Xb(20,"div",9),f.vc(21,Le,3,5,"div",10),f.Wb(),f.Wb(),f.Xb(22,"ion-item",11),f.Xb(23,"ion-label"),f.wc(24,"Swipe to Continue"),f.Wb(),f.Vb(25,"ion-icon",12),f.Wb(),f.Wb(),f.Xb(26,"ion-slide"),f.Xb(27,"app-score-page",13),f.fc("finished",(function(e){return t.finish(e)})),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e&&(f.kc("ngClass",f.pc(17,Ye,t.stage!=t.Stage.CORRECT&&t.stage!=t.Stage.INCORRECT,t.stage==t.Stage.CORRECT,t.stage==t.Stage.INCORRECT)),f.Kb(1),f.lc("value",t.progressPercent),f.Kb(1),f.kc("ngIf",!t.scoreCardDisplayed()),f.Kb(1),f.kc("ngIf",t.stage==t.Stage.START),f.Kb(4),f.kc("ngIf",t.stage==t.Stage.START),f.Kb(1),f.kc("ngIf",t.stage==t.Stage.MEMORIZE),f.Kb(1),f.kc("ngIf",t.stage==t.Stage.MASK),f.Kb(1),f.kc("ngIf",t.stage==t.Stage.SELECT),f.Kb(1),f.kc("ngIf",t.stage==t.Stage.CORRECT),f.Kb(1),f.kc("ngIf",t.stage==t.Stage.INCORRECT),f.Kb(3),f.kc("ngForOf",f.mc(21,De).constructor(4)),f.Kb(2),f.kc("ngForOf",f.mc(22,De).constructor(4)),f.Kb(2),f.kc("ngForOf",f.mc(23,De).constructor(4)),f.Kb(2),f.kc("ngForOf",f.mc(24,De).constructor(4)),f.Kb(6),f.kc("score",t.score)("length",t.taskLength)("assessment",!1))},directives:[s.j,r.h,s.u,r.j,s.B,s.A,r.i,s.o,s.p,s.m,V,s.g],styles:["ion-card[_ngcontent-%COMP%]{text-align:center;background-color:#dcdcdc;display:inline-block;margin:0;height:70px;width:52px}ion-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px;width:45px;margin-left:4px;margin-top:5px}"],data:{animation:[Object(Ie.k)("fadeInOut",[Object(Ie.h)("visible",Object(Ie.i)({opacity:.9})),Object(Ie.h)("invisible",Object(Ie.i)({opacity:0})),Object(Ie.j)(":enter",[Object(Ie.e)(500)]),Object(Ie.j)(":leave",[Object(Ie.e)(500)])]),Object(Ie.k)("countdown",[Object(Ie.j)("active <=> inactive",[Object(Ie.e)(200,Object(Ie.f)([Object(Ie.i)({transform:"translateY(0%)",opacity:"1"}),Object(Ie.i)({transform:"translateY(50%)",opacity:"0"}),Object(Ie.i)({transform:"translateY(-50%)",opacity:"0"}),Object(Ie.i)({transform:"translateY(0%)",opacity:"1"})]))])])]}}),_e),He=["slideElement"];function Be(e,t){if(1&e&&(f.Xb(0,"span"),f.Xb(1,"div",8),f.Xb(2,"b"),f.wc(3),f.Wb(),f.Wb(),f.Xb(4,"div",9),f.wc(5),f.Wb(),f.Wb()),2&e){var n=f.hc();f.Kb(3),f.zc("Score: ",n.score,"/",n.progressPercent*n.taskLength,""),f.Kb(2),f.yc("+",n.changeScoreValue,"")}}function qe(e,t){if(1&e){var n=f.Yb();f.Xb(0,"div",10),f.fc("click",(function(){return f.sc(n),f.hc().startMemorizeTimer()})),f.Xb(1,"div",11),f.wc(2," Tap to reveal "),f.Wb(),f.Wb()}if(2&e){var s=f.hc();f.kc("@fadeInOut",s.slideInfo[s.currentSlide].stage==s.Stage.START?"visible":"invisible")}}function Ue(e,t){if(1&e&&(f.Xb(0,"div",24),f.wc(1),f.Wb()),2&e){var n=f.hc(2);f.Kb(1),f.yc("Memorize the face placement: ",n.memorizeTime,"")}}function Ze(e,t){if(1&e&&(f.Xb(0,"div",24),f.wc(1,"Memorize the face placement: "),f.Xb(2,"span",25),f.wc(3),f.Wb(),f.Wb()),2&e){var n=f.hc(2);f.Kb(2),f.kc("@countdown",n.timeRemaining%2==0?"active":"inactive"),f.Kb(1),f.xc(n.timeRemaining)}}function Ge(e,t){1&e&&(f.Xb(0,"div",24),f.wc(1,"Hold the faces in your mind..."),f.Wb())}function Je(e,t){1&e&&(f.Xb(0,"div",24),f.wc(1,"Rearrange the faces"),f.Wb())}function Qe(e,t){1&e&&(f.Xb(0,"div",24),f.wc(1,"Correct!"),f.Wb())}function $e(e,t){1&e&&(f.Xb(0,"div",24),f.wc(1,"Incorrect!"),f.Wb())}function et(e,t){if(1&e&&f.Vb(0,"img",26),2&e){var n=f.hc(2);f.kc("src",n.getSrc(0),f.tc)}}function tt(e,t){if(1&e&&f.Vb(0,"img",26),2&e){var n=f.hc(2);f.kc("src",n.getSrc(1),f.tc)}}function nt(e,t){if(1&e&&f.Vb(0,"img",26),2&e){var n=f.hc(2);f.kc("src",n.getSrc(2),f.tc)}}function st(e,t){if(1&e&&f.Vb(0,"img",26),2&e){var n=f.hc(2);f.kc("src",n.getSrc(3),f.tc)}}function it(e,t){if(1&e){var n=f.Yb();f.Xb(0,"ion-button",27),f.fc("click",(function(){return f.sc(n),f.hc(2).clickDone()})),f.wc(1,"Done"),f.Wb()}}function rt(e,t){if(1&e){var n=f.Yb();f.Xb(0,"ion-grid",28),f.Xb(1,"ion-row"),f.Xb(2,"ion-col"),f.Xb(3,"span",29),f.wc(4,"Correct"),f.Wb(),f.Wb(),f.Xb(5,"ion-col"),f.Xb(6,"ion-toggle",30),f.fc("ngModelChange",(function(e){f.sc(n);var t=f.hc().index;return f.hc().slideInfo[t].feedback=e}))("click",(function(){return f.sc(n),f.hc(2).animateCardChange()})),f.Wb(),f.Wb(),f.Xb(7,"ion-col"),f.Xb(8,"span",29),f.wc(9,"Selected"),f.Wb(),f.Wb(),f.Wb(),f.Wb()}if(2&e){var s=f.hc().index,i=f.hc();f.Kb(6),f.kc("ngModel",i.slideInfo[s].feedback)}}var ct=function(e,t){return{"selected-card":e,"wrong-card":t}};function at(e,t){if(1&e){var n=f.Yb();f.Xb(0,"ion-slide",12),f.vc(1,Ue,2,1,"div",13),f.vc(2,Ze,4,2,"div",13),f.vc(3,Ge,2,0,"div",13),f.vc(4,Je,2,0,"div",13),f.vc(5,Qe,2,0,"div",13),f.vc(6,$e,2,0,"div",13),f.Xb(7,"div"),f.Xb(8,"div"),f.Xb(9,"ion-card",14),f.fc("click",(function(){return f.sc(n),f.hc().clickCard(0)})),f.vc(10,et,1,1,"img",15),f.Wb(),f.Xb(11,"ion-card",16),f.fc("click",(function(){return f.sc(n),f.hc().clickCard(1)})),f.vc(12,tt,1,1,"img",15),f.Wb(),f.Wb(),f.Xb(13,"div"),f.Xb(14,"ion-card",17),f.fc("click",(function(){return f.sc(n),f.hc().clickCard(2)})),f.vc(15,nt,1,1,"img",15),f.Wb(),f.Xb(16,"ion-card",18),f.fc("click",(function(){return f.sc(n),f.hc().clickCard(3)})),f.vc(17,st,1,1,"img",15),f.Wb(),f.Wb(),f.Wb(),f.Xb(18,"div",19),f.vc(19,it,2,0,"ion-button",20),f.vc(20,rt,10,1,"ion-grid",21),f.Wb(),f.Xb(21,"ion-item",22),f.Xb(22,"ion-label"),f.wc(23,"Swipe to Continue"),f.Wb(),f.Vb(24,"ion-icon",23),f.Wb(),f.Wb()}if(2&e){var s=t.index,i=f.hc();f.Kb(1),f.kc("ngIf",i.slideInfo[s].stage==i.Stage.START),f.Kb(1),f.kc("ngIf",i.slideInfo[s].stage==i.Stage.MEMORIZE),f.Kb(1),f.kc("ngIf",i.slideInfo[s].stage==i.Stage.MASK),f.Kb(1),f.kc("ngIf",i.slideInfo[s].stage==i.Stage.SELECT),f.Kb(1),f.kc("ngIf",i.slideInfo[s].stage==i.Stage.CORRECT),f.Kb(1),f.kc("ngIf",i.slideInfo[s].stage==i.Stage.INCORRECT),f.Kb(3),f.kc("button",i.slideInfo[s].stage==i.Stage.SELECT)("ngClass",f.oc(20,ct,i.slideInfo[s].stage!=i.Stage.START&&i.getSrc(0)==i.slideInfo[s].selectedFace,i.slideInfo[s].stage==i.Stage.INCORRECT&&i.slideInfo[s].feedback&&i.slideInfo[s].shuffledOrder[0]!=i.slideInfo[s].correctOrder[0])),f.Kb(1),f.kc("ngIf",i.slideInfo[s].stage!=i.Stage.START),f.Kb(1),f.kc("button",i.slideInfo[s].stage==i.Stage.SELECT)("ngClass",f.oc(23,ct,i.slideInfo[s].stage!=i.Stage.START&&i.getSrc(1)==i.slideInfo[s].selectedFace,i.slideInfo[s].stage==i.Stage.INCORRECT&&i.slideInfo[s].feedback&&i.slideInfo[s].shuffledOrder[1]!=i.slideInfo[s].correctOrder[1])),f.Kb(1),f.kc("ngIf",i.slideInfo[s].stage!=i.Stage.START),f.Kb(2),f.kc("button",i.slideInfo[s].stage==i.Stage.SELECT)("ngClass",f.oc(26,ct,i.slideInfo[s].stage!=i.Stage.START&&i.getSrc(2)==i.slideInfo[s].selectedFace,i.slideInfo[s].stage==i.Stage.INCORRECT&&i.slideInfo[s].feedback&&i.slideInfo[s].shuffledOrder[2]!=i.slideInfo[s].correctOrder[2])),f.Kb(1),f.kc("ngIf",i.slideInfo[s].stage!=i.Stage.START),f.Kb(1),f.kc("button",i.slideInfo[s].stage==i.Stage.SELECT)("ngClass",f.oc(29,ct,i.slideInfo[s].stage!=i.Stage.START&&i.getSrc(3)==i.slideInfo[s].selectedFace,i.slideInfo[s].stage==i.Stage.INCORRECT&&i.slideInfo[s].feedback&&i.slideInfo[s].shuffledOrder[3]!=i.slideInfo[s].correctOrder[3])),f.Kb(1),f.kc("ngIf",i.slideInfo[s].stage!=i.Stage.START),f.Kb(2),f.kc("ngIf",i.slideInfo[s].stage==i.Stage.SELECT),f.Kb(1),f.kc("ngIf",i.slideInfo[s].stage==i.Stage.INCORRECT)}}var ot,lt=function(e,t,n){return{default:e,success:t,failure:n}},ft=function(e){return e[e.START=0]="START",e[e.MEMORIZE=1]="MEMORIZE",e[e.MASK=2]="MASK",e[e.SELECT=3]="SELECT",e[e.CORRECT=4]="CORRECT",e[e.INCORRECT=5]="INCORRECT",e}({}),ht=((ot=function(){function e(){_classCallCheck(this,e),this.finished=new f.s,this.Stage=ft,this.numberOfOptions=4,this.numberOfSlides=4,this.mask="assets/background_imgs/mask1.png",this.memorizeTime=10,this.taskLength=this.numberOfOptions*this.numberOfSlides}return _createClass(e,[{key:"ngOnInit",value:function(){this.currentSlide=0,this.progressPercent=0,this.score=0,this.fadeIn=Object(R.h)(),this.changeScore=Object(R.h)(),this.slideInfo=[];for(var e=0;e<this.numberOfSlides;e++){var t=this.getSlideFaces(e);this.slideInfo.push({correctOrder:t,shuffledOrder:this.shuffleFaces(t),stage:ft.START,feedback:!0,selectedFace:null})}}},{key:"ngAfterViewInit",value:function(){this.slideElement.lockSwipes(!0)}},{key:"ngOnDestroy",value:function(){this.interval&&this.interval.unsubscribe(),this.timer&&this.timer.unsubscribe()}},{key:"finish",value:function(e){this.finished.emit([this.score,e]),0==e&&(this.ngOnInit(),this.slideElement.lockSwipes(!1),this.slideElement.slideTo(0),this.slideElement.lockSwipes(!0))}},{key:"clickDone",value:function(){var e=this;this.changeScoreValue=this.numberOfOptions,this.slideInfo[this.currentSlide].selectedFace=null;for(var t=0;t<this.slideInfo[this.currentSlide].shuffledOrder.length;t++)this.slideInfo[this.currentSlide].shuffledOrder[t]!=this.slideInfo[this.currentSlide].correctOrder[t]&&(this.changeScoreValue-=1);this.score+=this.changeScoreValue,this.slideInfo[this.currentSlide].stage=this.changeScoreValue==this.numberOfOptions?ft.CORRECT:ft.INCORRECT,this.progressPercent=(this.currentSlide+1)/this.numberOfSlides,this.slideElement.lockSwipes(!1),this.slideElement.lockSwipeToPrev(!0);var n=this.currentSlide;Object(o.a)(1e3).subscribe((function(){return Object(a.b)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.fadeIn=Object(R.h)().addElement(document.querySelectorAll(".footer")).fill("none").duration(500).fromTo("opacity","0","0.75"),e.t0=n==this.currentSlide,!e.t0){e.next=6;break}return e.next=5,this.fadeIn.play();case 5:Array.from(document.getElementsByClassName("footer"))[this.currentSlide].style.opacity=".75";case 6:case"end":return e.stop()}}),e,this)})))})),this.changeScore=Object(R.h)().addElement(document.querySelectorAll(".score-change")).fill("none").duration(2e3).keyframes([{offset:0,transform:"translateY(0%)"},{offset:.05,transform:"translateY(100%)"},{offset:.1,transform:"translateY(200%)"},{offset:.3,transform:"translateY(200%)"},{offset:.5,transform:"translateY(200%)"},{offset:.7,transform:"translateY(200%)"},{offset:.9,transform:"translateY(200%)"},{offset:.95,transform:"translateY(100%)"},{offset:1,transform:"translateY(0%)"}]),this.changeScore.play()}},{key:"getSlideFaces",value:function(e){for(var t=[],n=0;n<this.numberOfOptions-1;n++){for(var s=Math.floor(Math.random()*this.facePaths.length);t.indexOf(this.facePaths[s])>-1||this.facePaths[s]==this.facePaths[e];)s=Math.floor(Math.random()*this.facePaths.length);t.push(this.facePaths[s])}var i=Math.floor(Math.random()*this.numberOfOptions);return t.splice(i,0,this.facePaths[e]),t}},{key:"shuffleFaces",value:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);for(var s=t.length-1;s>0;s-=1){var i=Math.floor(Math.random()*(s+1)),r=t[s];t[s]=t[i],t[i]=r}return t}},{key:"startMemorizeTimer",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.timeRemaining=this.memorizeTime,this.slideInfo[this.currentSlide].stage=ft.MEMORIZE,this.timer=Object(o.a)(1e3*this.timeRemaining).subscribe((function(){t.startMaskTimer()})),this.interval=Object(l.a)(1e3).pipe(O(Object(o.a)(1e3*this.timeRemaining))).subscribe((function(){return Object(a.b)(t,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.timeRemaining--;case 1:case"end":return e.stop()}}),e,this)})))}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"startMaskTimer",value:function(){var e=this;this.slideInfo[this.currentSlide].stage=ft.MASK,this.timer=Object(o.a)(2e3).subscribe((function(){e.slideInfo[e.currentSlide].stage=ft.SELECT}))}},{key:"getSrc",value:function(e){return this.slideInfo[this.currentSlide].stage==ft.MASK?this.mask:this.slideInfo[this.currentSlide].stage==ft.SELECT||this.slideInfo[this.currentSlide].stage==ft.INCORRECT&&this.slideInfo[this.currentSlide].feedback?this.slideInfo[this.currentSlide].shuffledOrder[e]:this.slideInfo[this.currentSlide].correctOrder[e]}},{key:"clickCard",value:function(e){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.slideInfo[this.currentSlide].stage!=ft.SELECT){t.next=4;break}null==this.slideInfo[this.currentSlide].selectedFace?this.slideInfo[this.currentSlide].selectedFace=this.slideInfo[this.currentSlide].shuffledOrder[e]:(s=this.slideInfo[this.currentSlide].shuffledOrder.indexOf(this.slideInfo[this.currentSlide].selectedFace),n=[this.slideInfo[this.currentSlide].shuffledOrder[s],this.slideInfo[this.currentSlide].shuffledOrder[e]],this.slideInfo[this.currentSlide].shuffledOrder[e]=n[0],this.slideInfo[this.currentSlide].shuffledOrder[s]=n[1],this.slideInfo[this.currentSlide].selectedFace=null),t.next=9;break;case 4:if(t.t0=this.showFeedback(),!t.t0){t.next=9;break}return t.next=8,this.animateCardChange();case 8:this.slideInfo[this.currentSlide].feedback=!this.slideInfo[this.currentSlide].feedback;case 9:case"end":return t.stop()}}),t,this)})))}},{key:"animateCardChange",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,s,i,r,c,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],n=0;n<this.slideInfo[this.currentSlide].correctOrder.length;n++)s=this.slideInfo[this.currentSlide].shuffledOrder.indexOf(this.slideInfo[this.currentSlide].correctOrder[n]),i="0px",r="0px",n!=s&&(1!=Math.abs(n-s)&&3!=Math.abs(n-s)||(i="-125px",(n<s&&!this.slideInfo[this.currentSlide].feedback||n>s&&this.slideInfo[this.currentSlide].feedback)&&(i="125px"),(1==n&&2==s||2==n&&1==s)&&(i="125px"==i?"-125px":"125px")),(3==Math.abs(n-s)||2==Math.abs(n-s)||1==Math.abs(n-s)&&(1==n&&2==s||2==n&&1==s))&&(r="-150px",(n<s&&!this.slideInfo[this.currentSlide].feedback||n>s&&this.slideInfo[this.currentSlide].feedback)&&(r="150px"))),c="#card-"+(this.slideInfo[this.currentSlide].feedback?s:n),a=Object(R.h)().addElement(document.querySelectorAll(c)[this.currentSlide]).fill("none").duration(300).fromTo("transform","translate(0vw, 0vh)","translate("+i+", "+r+")"),t.push(a);o=0;case 3:if(!(o<t.length)){e.next=13;break}if(o!=t.length-1){e.next=9;break}return e.next=7,t[o].play();case 7:e.next=10;break;case 9:t[o].play();case 10:o++,e.next=3;break;case 13:case"end":return e.stop()}}),e,this)})))}},{key:"showFeedback",value:function(){return!this.scoreCardDisplayed()&&(this.slideInfo[this.currentSlide].stage==ft.CORRECT||this.slideInfo[this.currentSlide].stage==ft.INCORRECT)}},{key:"scoreCardDisplayed",value:function(){return this.currentSlide>=this.numberOfSlides}},{key:"changeSlide",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.slideElement.getActiveIndex();case 2:if(e.t0=e.sent,e.t1=this.currentSlide,!(e.t0>e.t1)){e.next=17;break}return e.next=7,this.slideElement.getActiveIndex();case 7:return this.currentSlide=e.sent,e.next=10,this.slideElement.lockSwipes(!0);case 10:return e.next=12,this.changeScore.stop();case 12:return e.next=14,this.fadeIn.stop();case 14:for(t=Array.from(document.getElementsByClassName("footer")),n=0;n<t.length;n++)t[n].style.opacity="0";this.scoreCardDisplayed()||this.startMemorizeTimer();case 17:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||ot)},ot.\u0275cmp=f.Ob({type:ot,selectors:[["app-shuffle"]],viewQuery:function(e,t){var n;1&e&&f.Bc(He,!0),2&e&&f.qc(n=f.gc())&&(t.slideElement=n.first)},inputs:{facePaths:"facePaths"},outputs:{finished:"finished"},decls:9,vars:12,consts:[[3,"ngClass"],[2,"margin-top","0px",3,"value"],[4,"ngIf"],["class","overlay","button","",3,"click",4,"ngIf"],[3,"ionSlideDidChange"],["slideElement",""],["class","flex-slide",4,"ngFor","ngForOf"],[3,"score","length","assessment","finished"],[1,"score-banner"],[1,"score-change",2,"right","12vw"],["button","",1,"overlay",3,"click"],[1,"overlay-content"],[1,"flex-slide"],["class","prompt-small",4,"ngIf"],["id","card-0",1,"grid-card",3,"button","ngClass","click"],[3,"src",4,"ngIf"],["id","card-1",1,"grid-card",3,"button","ngClass","click"],["id","card-2",1,"grid-card",3,"button","ngClass","click"],["id","card-3",1,"grid-card",3,"button","ngClass","click"],[2,"text-align","center","height","10%","width","100%"],[3,"click",4,"ngIf"],["style","--background: transparent; height: 60%","lines","none",4,"ngIf"],["lines","none",1,"footer"],["slot","end","color","dark","name","arrow-back"],[1,"prompt-small"],[1,"time-left"],[3,"src"],[3,"click"],["lines","none",2,"--background","transparent","height","60%"],[2,"color","white"],[3,"ngModel","ngModelChange","click"]],template:function(e,t){1&e&&(f.Xb(0,"ion-content",0),f.Vb(1,"ion-progress-bar",1),f.vc(2,Be,6,3,"span",2),f.vc(3,qe,3,1,"div",3),f.Xb(4,"ion-slides",4,5),f.fc("ionSlideDidChange",(function(){return t.changeSlide()})),f.vc(6,at,25,32,"ion-slide",6),f.Xb(7,"ion-slide"),f.Xb(8,"app-score-page",7),f.fc("finished",(function(e){return t.finish(e)})),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e&&(f.kc("ngClass",f.pc(8,lt,!t.showFeedback(),t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.CORRECT,t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.INCORRECT)),f.Kb(1),f.lc("value",t.progressPercent),f.Kb(1),f.kc("ngIf",!t.scoreCardDisplayed()),f.Kb(1),f.kc("ngIf",t.slideInfo[t.currentSlide].stage==t.Stage.START),f.Kb(3),f.kc("ngForOf",t.slideInfo),f.Kb(2),f.kc("score",t.score)("length",t.taskLength)("assessment",!1))},directives:[s.j,r.h,s.u,r.j,s.B,r.i,s.A,V,s.g,s.o,s.p,s.m,s.e,s.k,s.x,s.i,s.E,s.b,c.f,c.h],styles:[".wrong-card[_ngcontent-%COMP%]{background-color:transparent!important}"],data:{animation:[Object(Ie.k)("fadeInOut",[Object(Ie.h)("visible",Object(Ie.i)({opacity:.9})),Object(Ie.h)("invisible",Object(Ie.i)({opacity:0})),Object(Ie.j)(":enter",[Object(Ie.e)(500)]),Object(Ie.j)(":leave",[Object(Ie.e)(500)])]),Object(Ie.k)("countdown",[Object(Ie.j)("active <=> inactive",[Object(Ie.e)(200,Object(Ie.f)([Object(Ie.i)({transform:"translateY(0%)",opacity:"1"}),Object(Ie.i)({transform:"translateY(100%)",opacity:"0"}),Object(Ie.i)({transform:"translateY(-100%)",opacity:"0"}),Object(Ie.i)({transform:"translateY(0%)",opacity:"1"})]))])])]}}),ot),ut=["slideElement"];function dt(e,t){if(1&e&&(f.Xb(0,"span"),f.Xb(1,"div",8),f.Xb(2,"b"),f.wc(3),f.Wb(),f.Wb(),f.Xb(4,"div",9),f.wc(5,"+1"),f.Wb(),f.Wb()),2&e){var n=f.hc();f.Kb(3),f.zc("Score: ",n.score,"/",n.progressPercent*n.taskLength,"")}}function bt(e,t){if(1&e){var n=f.Yb();f.Xb(0,"div",10),f.fc("click",(function(){return f.sc(n),f.hc().startMemorizeTimer()})),f.Xb(1,"div",11),f.wc(2," Tap to reveal "),f.Wb(),f.Wb()}if(2&e){var s=f.hc();f.kc("@fadeInOut",s.slideInfo[s.currentSlide].stage==s.Stage.START?"visible":"invisible")}}function gt(e,t){if(1&e&&(f.Xb(0,"div",19),f.wc(1),f.Wb()),2&e){var n=f.hc(3);f.Kb(1),f.yc("Memorize the face: ",n.memorizeTime,"")}}function mt(e,t){if(1&e&&(f.Xb(0,"div",19),f.wc(1,"Memorize the face: "),f.Xb(2,"span",20),f.wc(3),f.Wb(),f.Wb()),2&e){var n=f.hc(3);f.Kb(2),f.kc("@countdown",n.timeRemaining%2==0?"active":"inactive"),f.Kb(1),f.xc(n.timeRemaining)}}function vt(e,t){1&e&&(f.Xb(0,"div",19),f.wc(1,"Hold the face in your mind..."),f.Wb())}var pt=function(e){return{width:e}};function kt(e,t){if(1&e&&f.Vb(0,"img",21),2&e){var n=f.hc(2).index,s=f.hc();f.kc("src",s.slideInfo[n].stage==s.Stage.MEMORIZE?s.slideInfo[n].correctFace:s.mask,f.tc)("ngStyle",f.nc(2,pt,s.slideInfo[n].stage==s.Stage.MASK?"85%":"auto"))}}function St(e,t){if(1&e&&(f.Xb(0,"div",14),f.vc(1,gt,2,1,"div",15),f.vc(2,mt,4,2,"div",15),f.vc(3,vt,2,0,"div",15),f.Xb(4,"ion-card",16),f.vc(5,kt,1,4,"img",17),f.Wb(),f.Vb(6,"ion-button",18),f.Wb()),2&e){var n=f.hc().index,s=f.hc();f.Kb(1),f.kc("ngIf",s.slideInfo[n].stage==s.Stage.START),f.Kb(1),f.kc("ngIf",s.slideInfo[n].stage==s.Stage.MEMORIZE),f.Kb(1),f.kc("ngIf",s.slideInfo[n].stage==s.Stage.MASK),f.Kb(2),f.kc("ngIf",s.slideInfo[n].stage!=s.Stage.START)}}function It(e,t){1&e&&(f.Xb(0,"div",19),f.wc(1,"Who did you see?"),f.Wb())}function wt(e,t){1&e&&(f.Xb(0,"div",19),f.wc(1,"Correct!"),f.Wb())}function yt(e,t){1&e&&(f.Xb(0,"div",19),f.wc(1,"Incorrect!"),f.Wb())}var Ot=function(e,t){return{"selected-wrong-card":e,"disabled-card":t}};function Ct(e,t){if(1&e){var n=f.Yb();f.Xb(0,"div",22),f.vc(1,It,2,0,"div",15),f.vc(2,wt,2,0,"div",15),f.vc(3,yt,2,0,"div",15),f.Xb(4,"div"),f.Xb(5,"div"),f.Xb(6,"ion-card",23),f.fc("click",(function(){f.sc(n);var e=f.hc().index,t=f.hc();return t.selectFace(t.slideInfo[e].faces[0])})),f.Vb(7,"img",24),f.Wb(),f.Xb(8,"ion-card",23),f.fc("click",(function(){f.sc(n);var e=f.hc().index,t=f.hc();return t.selectFace(t.slideInfo[e].faces[1])})),f.Vb(9,"img",24),f.Wb(),f.Wb(),f.Xb(10,"div"),f.Xb(11,"ion-card",23),f.fc("click",(function(){f.sc(n);var e=f.hc().index,t=f.hc();return t.selectFace(t.slideInfo[e].faces[2])})),f.Vb(12,"img",24),f.Wb(),f.Xb(13,"ion-card",23),f.fc("click",(function(){f.sc(n);var e=f.hc().index,t=f.hc();return t.selectFace(t.slideInfo[e].faces[3])})),f.Vb(14,"img",24),f.Wb(),f.Wb(),f.Wb(),f.Xb(15,"ion-item",25),f.Xb(16,"ion-label"),f.wc(17,"Swipe to Continue"),f.Wb(),f.Vb(18,"ion-icon",26),f.Wb(),f.Wb()}if(2&e){var s=f.hc().index,i=f.hc();f.Kb(1),f.kc("ngIf",i.slideInfo[s].stage==i.Stage.SELECT),f.Kb(1),f.kc("ngIf",i.slideInfo[s].stage==i.Stage.CORRECT),f.Kb(1),f.kc("ngIf",i.slideInfo[s].stage==i.Stage.INCORRECT),f.Kb(3),f.kc("button",!i.showFeedback())("ngClass",f.oc(15,Ot,i.showFeedback()&&i.slideInfo[s].faces[0]!=i.slideInfo[s].correctFace&&i.slideInfo[s].faces[0]==i.slideInfo[s].selectedFace,i.showFeedback()&&i.slideInfo[s].faces[0]!=i.slideInfo[s].correctFace)),f.Kb(1),f.kc("src",i.slideInfo[s].faces[0],f.tc),f.Kb(1),f.kc("button",!i.showFeedback())("ngClass",f.oc(18,Ot,i.showFeedback()&&i.slideInfo[s].faces[1]!=i.slideInfo[s].correctFace&&i.slideInfo[s].faces[1]==i.slideInfo[s].selectedFace,i.showFeedback()&&i.slideInfo[s].faces[1]!=i.slideInfo[s].correctFace)),f.Kb(1),f.kc("src",i.slideInfo[s].faces[1],f.tc),f.Kb(2),f.kc("button",!i.showFeedback())("ngClass",f.oc(21,Ot,i.showFeedback()&&i.slideInfo[s].faces[2]!=i.slideInfo[s].correctFace&&i.slideInfo[s].faces[2]==i.slideInfo[s].selectedFace,i.showFeedback()&&i.slideInfo[s].faces[2]!=i.slideInfo[s].correctFace)),f.Kb(1),f.kc("src",i.slideInfo[s].faces[2],f.tc),f.Kb(1),f.kc("button",!i.showFeedback())("ngClass",f.oc(24,Ot,i.showFeedback()&&i.slideInfo[s].faces[3]!=i.slideInfo[s].correctFace&&i.slideInfo[s].faces[3]==i.slideInfo[s].selectedFace,i.showFeedback()&&i.slideInfo[s].faces[3]!=i.slideInfo[s].correctFace)),f.Kb(1),f.kc("src",i.slideInfo[s].faces[3],f.tc)}}function Et(e,t){if(1&e&&(f.Xb(0,"ion-slide"),f.vc(1,St,7,4,"div",12),f.vc(2,Ct,19,27,"div",13),f.Wb()),2&e){var n=t.index,s=f.hc();f.Kb(1),f.kc("ngIf",s.firstStage(n)),f.Kb(1),f.kc("ngIf",!s.firstStage(n))}}var Tt,Rt=function(e,t,n){return{default:e,success:t,failure:n}},Ft=function(e){return e[e.START=0]="START",e[e.MEMORIZE=1]="MEMORIZE",e[e.MASK=2]="MASK",e[e.SELECT=3]="SELECT",e[e.CORRECT=4]="CORRECT",e[e.INCORRECT=5]="INCORRECT",e}({}),xt=((Tt=function(){function e(){_classCallCheck(this,e),this.finished=new f.s,this.Stage=Ft,this.numberOfOptions=4,this.mask="assets/background_imgs/mask1.png",this.memorizeTime=3}return _createClass(e,[{key:"ngOnInit",value:function(){this.currentSlide=0,this.progressPercent=0,this.score=0,this.fadeIn=Object(R.h)(),this.changeScore=Object(R.h)(),this.taskLength=this.facePaths.length,this.slideInfo=[];for(var e=0;e<this.taskLength;e++)this.slideInfo.push({correctFace:this.facePaths[e],selectedFace:null,faces:this.getSlideFaces(e),stage:Ft.START})}},{key:"ngAfterViewInit",value:function(){this.slideElement.lockSwipes(!0)}},{key:"ngOnDestroy",value:function(){this.interval&&this.interval.unsubscribe(),this.timer&&this.timer.unsubscribe()}},{key:"selectFace",value:function(e){var t=this;if(this.slideInfo[this.currentSlide].stage==Ft.SELECT){this.slideInfo[this.currentSlide].selectedFace=e,e==this.slideInfo[this.currentSlide].correctFace?(this.score++,this.slideInfo[this.currentSlide].stage=Ft.CORRECT,this.changeScore=Object(R.h)().addElement(document.querySelectorAll(".score-change")).fill("none").duration(2e3).keyframes([{offset:0,transform:"translateY(0%)"},{offset:.05,transform:"translateY(100%)"},{offset:.1,transform:"translateY(200%)"},{offset:.3,transform:"translateY(200%)"},{offset:.5,transform:"translateY(200%)"},{offset:.7,transform:"translateY(200%)"},{offset:.9,transform:"translateY(200%)"},{offset:.95,transform:"translateY(100%)"},{offset:1,transform:"translateY(0%)"}]),this.changeScore.play()):this.slideInfo[this.currentSlide].stage=Ft.INCORRECT,this.progressPercent=(this.currentSlide+1)/this.taskLength,this.slideElement.lockSwipes(!1),this.slideElement.lockSwipeToPrev(!0);var n=this.currentSlide;Object(o.a)(1e3).subscribe((function(){return Object(a.b)(t,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.fadeIn=Object(R.h)().addElement(document.querySelectorAll(".footer")).fill("none").duration(500).fromTo("opacity","0","0.75"),e.t0=n==this.currentSlide,!e.t0){e.next=6;break}return e.next=5,this.fadeIn.play();case 5:Array.from(document.getElementsByClassName("footer"))[this.currentSlide].style.opacity=".75";case 6:case"end":return e.stop()}}),e,this)})))}))}}},{key:"getSlideFaces",value:function(e){for(var t=[],n=0;n<this.numberOfOptions-1;n++){for(var s=Math.floor(Math.random()*this.taskLength);t.indexOf(this.facePaths[s])>-1||this.facePaths[s]==this.facePaths[e];)s=Math.floor(Math.random()*this.taskLength);t.push(this.facePaths[s])}var i=Math.floor(Math.random()*this.numberOfOptions);return t.splice(i,0,this.facePaths[e]),t}},{key:"startMemorizeTimer",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.timeRemaining=this.memorizeTime,this.slideInfo[this.currentSlide].stage=Ft.MEMORIZE,this.timer=Object(o.a)(1e3*this.timeRemaining).subscribe((function(){t.startMaskTimer()})),this.interval=Object(l.a)(1e3).pipe(O(Object(o.a)(1e3*this.timeRemaining))).subscribe((function(){return Object(a.b)(t,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.timeRemaining--;case 1:case"end":return e.stop()}}),e,this)})))}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"startMaskTimer",value:function(){var e=this;this.slideInfo[this.currentSlide].stage=Ft.MASK,this.timer=Object(o.a)(2e3).subscribe((function(){e.slideInfo[e.currentSlide].stage=Ft.SELECT}))}},{key:"firstStage",value:function(e){return this.slideInfo[e].stage==Ft.START||this.slideInfo[e].stage==Ft.MEMORIZE||this.slideInfo[e].stage==Ft.MASK}},{key:"getSrc",value:function(e){return this.slideInfo[e].stage==Ft.MEMORIZE?this.slideInfo[e].correctFace:this.slideInfo[e].stage==Ft.MASK?this.mask:null}},{key:"showFeedback",value:function(){return!this.scoreCardDisplayed()&&(this.slideInfo[this.currentSlide].stage==Ft.CORRECT||this.slideInfo[this.currentSlide].stage==Ft.INCORRECT)}},{key:"scoreCardDisplayed",value:function(){return this.currentSlide>=this.taskLength}},{key:"changeSlide",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.slideElement.getActiveIndex();case 2:if(e.t0=e.sent,e.t1=this.currentSlide,!(e.t0>e.t1)){e.next=17;break}return e.next=7,this.slideElement.getActiveIndex();case 7:return this.currentSlide=e.sent,e.next=10,this.slideElement.lockSwipes(!0);case 10:return e.next=12,this.changeScore.stop();case 12:return e.next=14,this.fadeIn.stop();case 14:for(t=Array.from(document.getElementsByClassName("footer")),n=0;n<t.length;n++)t[n].style.opacity="0";this.scoreCardDisplayed()||this.startMemorizeTimer();case 17:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||Tt)},Tt.\u0275cmp=f.Ob({type:Tt,selectors:[["app-forced-choice"]],viewQuery:function(e,t){var n;1&e&&f.Bc(ut,!0),2&e&&f.qc(n=f.gc())&&(t.slideElement=n.first)},inputs:{facePaths:"facePaths"},outputs:{finished:"finished"},decls:9,vars:12,consts:[[3,"ngClass"],[2,"margin-top","0px",3,"value"],[4,"ngIf"],["class","overlay","button","",3,"click",4,"ngIf"],[3,"ionSlideDidChange"],["slideElement",""],[4,"ngFor","ngForOf"],[3,"score","length","assessment","finished"],[1,"score-banner"],[1,"score-change"],["button","",1,"overlay",3,"click"],[1,"overlay-content"],["class","flex-slide","style","align-items: center",4,"ngIf"],["class","flex-slide",4,"ngIf"],[1,"flex-slide",2,"align-items","center"],["class","prompt",4,"ngIf"],[2,"height","310px","width","270px","display","flex","justify-content","center","align-items","center","background-color","gainsboro"],["style","height: 270px",3,"src","ngStyle",4,"ngIf"],[2,"visibility","hidden"],[1,"prompt"],[1,"time-left"],[2,"height","270px",3,"src","ngStyle"],[1,"flex-slide"],[1,"grid-card",3,"button","ngClass","click"],[3,"src"],["lines","none",1,"footer"],["slot","end","color","dark","name","arrow-back"]],template:function(e,t){1&e&&(f.Xb(0,"ion-content",0),f.Vb(1,"ion-progress-bar",1),f.vc(2,dt,6,2,"span",2),f.vc(3,bt,3,1,"div",3),f.Xb(4,"ion-slides",4,5),f.fc("ionSlideDidChange",(function(){return t.changeSlide()})),f.vc(6,Et,3,2,"ion-slide",6),f.Xb(7,"ion-slide"),f.Xb(8,"app-score-page",7),f.fc("finished",(function(){return t.finished.emit([t.score,2])})),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e&&(f.kc("ngClass",f.pc(8,Rt,!t.showFeedback(),t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.CORRECT,t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.INCORRECT)),f.Kb(1),f.lc("value",t.progressPercent),f.Kb(1),f.kc("ngIf",!t.scoreCardDisplayed()),f.Kb(1),f.kc("ngIf",t.slideInfo[t.currentSlide].stage==t.Stage.START),f.Kb(3),f.kc("ngForOf",t.slideInfo),f.Kb(2),f.kc("score",t.score)("length",t.taskLength)("assessment",!0))},directives:[s.j,r.h,s.u,r.j,s.B,r.i,s.A,V,s.g,s.e,r.k,s.o,s.p,s.m],styles:[""],data:{animation:[Object(Ie.k)("fadeInOut",[Object(Ie.h)("visible",Object(Ie.i)({opacity:.9})),Object(Ie.h)("invisible",Object(Ie.i)({opacity:0})),Object(Ie.j)(":enter",[Object(Ie.e)(500)]),Object(Ie.j)(":leave",[Object(Ie.e)(500)])]),Object(Ie.k)("countdown",[Object(Ie.j)("active <=> inactive",[Object(Ie.e)(200,Object(Ie.f)([Object(Ie.i)({transform:"translateY(0%)",opacity:"1"}),Object(Ie.i)({transform:"translateY(100%)",opacity:"0"}),Object(Ie.i)({transform:"translateY(-100%)",opacity:"0"}),Object(Ie.i)({transform:"translateY(0%)",opacity:"1"})]))])])]}}),Tt),Wt=["slideElement"];function Xt(e,t){if(1&e&&(f.Xb(0,"span"),f.Xb(1,"div",8),f.Xb(2,"b"),f.wc(3),f.Wb(),f.Wb(),f.Xb(4,"div",9),f.wc(5,"+1"),f.Wb(),f.Wb()),2&e){var n=f.hc();f.Kb(3),f.zc("Score: ",n.score,"/",n.progressPercent*n.taskLength,"")}}function Mt(e,t){if(1&e){var n=f.Yb();f.Xb(0,"div",10),f.fc("click",(function(){return f.sc(n),f.hc().startMemorizeTimer()})),f.Xb(1,"div",11),f.wc(2," Tap to reveal "),f.Wb(),f.Wb()}if(2&e){var s=f.hc();f.kc("@fadeInOut",s.slideInfo[s.currentSlide].stage==s.Stage.START?"visible":"invisible")}}function At(e,t){if(1&e&&(f.Xb(0,"div",17),f.wc(1),f.Wb()),2&e){var n=f.hc(2);f.Kb(1),f.yc("Memorize the face: ",n.memorizeTime,"")}}function Kt(e,t){if(1&e&&(f.Xb(0,"div",17),f.wc(1,"Memorize the face: "),f.Xb(2,"span",18),f.wc(3),f.Wb(),f.Wb()),2&e){var n=f.hc(2);f.Kb(2),f.kc("@countdown",n.timeRemaining%2==0?"active":"inactive"),f.Kb(1),f.xc(n.timeRemaining)}}function jt(e,t){1&e&&(f.Xb(0,"div",17),f.wc(1,"Hold the face in your mind..."),f.Wb())}function Pt(e,t){1&e&&(f.Xb(0,"div",17),f.wc(1,"Is this the same person?"),f.Wb())}function Nt(e,t){1&e&&(f.Xb(0,"div",17),f.wc(1,"Correct!"),f.Wb())}function Lt(e,t){1&e&&(f.Xb(0,"div",17),f.wc(1,"Incorrect!"),f.Wb())}function _t(e,t){if(1&e){var n=f.Yb();f.Xb(0,"ion-icon",23),f.fc("click",(function(){return f.sc(n),f.hc(3).selectFace(!0)})),f.Wb()}}var Yt=function(e){return{width:e}};function Dt(e,t){if(1&e&&f.Vb(0,"img",24),2&e){var n=f.hc(2).index,s=f.hc();f.kc("src",s.getSrc(n),f.tc)("ngStyle",f.nc(2,Yt,s.slideInfo[n].stage==s.Stage.MASK?"85%":"auto"))}}function Vt(e,t){if(1&e){var n=f.Yb();f.Xb(0,"ion-icon",25),f.fc("click",(function(){return f.sc(n),f.hc(3).selectFace(!1)})),f.Wb()}}function zt(e,t){if(1&e&&(f.Xb(0,"ion-card",19),f.vc(1,_t,1,0,"ion-icon",20),f.vc(2,Dt,1,4,"img",21),f.vc(3,Vt,1,0,"ion-icon",22),f.Wb()),2&e){var n=f.hc().index,s=f.hc();f.Kb(1),f.kc("ngIf",s.slideInfo[n].stage==s.Stage.SELECT),f.Kb(1),f.kc("ngIf",s.slideInfo[n].stage!=s.Stage.START),f.Kb(1),f.kc("ngIf",s.slideInfo[n].stage==s.Stage.SELECT)}}function Ht(e,t){if(1&e){var n=f.Yb();f.Xb(0,"div",26),f.Xb(1,"ion-button",27),f.fc("click",(function(){return f.sc(n),f.hc(2).selectFace(!0)})),f.wc(2,"Same"),f.Wb(),f.Xb(3,"ion-button",28),f.fc("click",(function(){return f.sc(n),f.hc(2).selectFace(!1)})),f.wc(4,"Different"),f.Wb(),f.Wb()}}function Bt(e,t){1&e&&(f.Xb(0,"div",35),f.wc(1,"Same"),f.Wb())}function qt(e,t){1&e&&(f.Xb(0,"div",35),f.wc(1,"Different"),f.Wb())}function Ut(e,t){if(1&e&&(f.Xb(0,"div",29),f.vc(1,Bt,2,0,"div",30),f.vc(2,qt,2,0,"div",30),f.Xb(3,"ion-card",31),f.Vb(4,"img",32),f.Wb(),f.Xb(5,"ion-card",31),f.Vb(6,"img",32),f.Wb(),f.Xb(7,"ion-item",33),f.Xb(8,"ion-label"),f.wc(9,"Swipe to Continue"),f.Wb(),f.Vb(10,"ion-icon",34),f.Wb(),f.Wb()),2&e){var n=f.hc().index,s=f.hc();f.Kb(1),f.kc("ngIf",s.slideInfo[n].correctFace==s.slideInfo[n].displayedFace),f.Kb(1),f.kc("ngIf",s.slideInfo[n].correctFace!=s.slideInfo[n].displayedFace),f.Kb(2),f.kc("src",s.slideInfo[n].correctFace,f.tc),f.Kb(2),f.kc("src",s.slideInfo[n].displayedFace,f.tc)}}function Zt(e,t){if(1&e){var n=f.Yb();f.Xb(0,"ion-slide",12),f.fc("swipeleft",(function(){return f.sc(n),f.hc().selectFace(!0)}))("swiperight",(function(){return f.sc(n),f.hc().selectFace(!1)})),f.vc(1,At,2,1,"div",13),f.vc(2,Kt,4,2,"div",13),f.vc(3,jt,2,0,"div",13),f.vc(4,Pt,2,0,"div",13),f.vc(5,Nt,2,0,"div",13),f.vc(6,Lt,2,0,"div",13),f.vc(7,zt,4,3,"ion-card",14),f.vc(8,Ht,5,0,"div",15),f.vc(9,Ut,11,4,"div",16),f.Wb()}if(2&e){var s=t.index,i=f.hc();f.Kb(1),f.kc("ngIf",i.slideInfo[s].stage==i.Stage.START),f.Kb(1),f.kc("ngIf",i.slideInfo[s].stage==i.Stage.MEMORIZE),f.Kb(1),f.kc("ngIf",i.slideInfo[s].stage==i.Stage.MASK),f.Kb(1),f.kc("ngIf",i.slideInfo[s].stage==i.Stage.SELECT),f.Kb(1),f.kc("ngIf",i.slideInfo[s].stage==i.Stage.CORRECT),f.Kb(1),f.kc("ngIf",i.slideInfo[s].stage==i.Stage.INCORRECT),f.Kb(1),f.kc("ngIf",i.slideInfo[s].stage!=i.Stage.CORRECT&&i.slideInfo[s].stage!=i.Stage.INCORRECT),f.Kb(1),f.kc("ngIf",i.slideInfo[s].stage!=i.Stage.CORRECT&&i.slideInfo[s].stage!=i.Stage.INCORRECT),f.Kb(1),f.kc("ngIf",i.slideInfo[s].stage==i.Stage.CORRECT||i.slideInfo[s].stage==i.Stage.INCORRECT)}}var Gt,Jt=function(e,t,n){return{default:e,success:t,failure:n}},Qt=function(e){return e[e.START=0]="START",e[e.MEMORIZE=1]="MEMORIZE",e[e.MASK=2]="MASK",e[e.SELECT=3]="SELECT",e[e.CORRECT=4]="CORRECT",e[e.INCORRECT=5]="INCORRECT",e}({}),$t=((Gt=function(){function e(){_classCallCheck(this,e),this.finished=new f.s,this.Stage=Qt,this.mask="assets/background_imgs/mask1.png",this.memorizeTime=3}return _createClass(e,[{key:"ngOnInit",value:function(){this.currentSlide=0,this.progressPercent=0,this.score=0,this.fadeIn=Object(R.h)(),this.changeScore=Object(R.h)(),this.taskLength=this.facePaths.length,this.slideInfo=[];for(var e=0;e<this.taskLength;e++){var t=this.facePaths[e];Math.random()>.5&&(t=this.facePaths[Math.floor(Math.random()*this.taskLength)]),this.slideInfo.push({correctFace:this.facePaths[e],displayedFace:t,selection:null,stage:Qt.START})}}},{key:"ngAfterViewInit",value:function(){this.slideElement.lockSwipes(!0)}},{key:"ngOnDestroy",value:function(){this.interval&&this.interval.unsubscribe(),this.timer&&this.timer.unsubscribe()}},{key:"selectFace",value:function(e){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,s,i,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.slideInfo[this.currentSlide].stage!=Qt.SELECT){t.next=13;break}if(!e){t.next=7;break}return n=Object(R.h)().addElement(document.querySelector(".swipe-card")).fill("none").duration(200).keyframes([{offset:0,transform:"translateX(0%)"},{offset:1,transform:"translateX(-100%)"}]),t.next=5,n.play();case 5:t.next=10;break;case 7:return s=Object(R.h)().addElement(document.querySelector(".swipe-card")).fill("none").duration(200).keyframes([{offset:0,transform:"translateX(0%)"},{offset:1,transform:"translateX(100%)"}]),t.next=10,s.play();case 10:this.slideInfo[this.currentSlide].selection=e,e==(this.slideInfo[this.currentSlide].displayedFace==this.slideInfo[this.currentSlide].correctFace)?(this.score++,this.slideInfo[this.currentSlide].stage=Qt.CORRECT,this.changeScore=Object(R.h)().addElement(document.querySelectorAll(".score-change")).fill("none").duration(2e3).keyframes([{offset:0,transform:"translateY(0%)"},{offset:.05,transform:"translateY(100%)"},{offset:.1,transform:"translateY(200%)"},{offset:.3,transform:"translateY(200%)"},{offset:.5,transform:"translateY(200%)"},{offset:.7,transform:"translateY(200%)"},{offset:.9,transform:"translateY(200%)"},{offset:.95,transform:"translateY(100%)"},{offset:1,transform:"translateY(0%)"}]),this.changeScore.play()):this.slideInfo[this.currentSlide].stage=Qt.INCORRECT,this.progressPercent=(this.currentSlide+1)/this.taskLength,this.slideElement.lockSwipes(!1),this.slideElement.lockSwipeToPrev(!0),i=this.currentSlide,Object(o.a)(1e3).subscribe((function(){return Object(a.b)(r,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.fadeIn=Object(R.h)().addElement(document.querySelectorAll(".footer")).fill("none").duration(500).fromTo("opacity","0","0.75"),e.t0=i==this.currentSlide,!e.t0){e.next=6;break}return e.next=5,this.fadeIn.play();case 5:Array.from(document.getElementsByClassName("footer"))[this.currentSlide].style.opacity=".75";case 6:case"end":return e.stop()}}),e,this)})))}));case 13:case"end":return t.stop()}}),t,this)})))}},{key:"startMemorizeTimer",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.timeRemaining=this.memorizeTime,this.slideInfo[this.currentSlide].stage=Qt.MEMORIZE,this.timer=Object(o.a)(1e3*this.timeRemaining).subscribe((function(){t.startMaskTimer()})),this.interval=Object(l.a)(1e3).pipe(O(Object(o.a)(1e3*this.timeRemaining))).subscribe((function(){return Object(a.b)(t,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.timeRemaining--;case 1:case"end":return e.stop()}}),e,this)})))}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"startMaskTimer",value:function(){var e=this;this.slideInfo[this.currentSlide].stage=Qt.MASK,this.timer=Object(o.a)(2e3).subscribe((function(){e.slideInfo[e.currentSlide].stage=Qt.SELECT,Object(o.a)(500).subscribe((function(){return Object(a.b)(e,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(R.h)().addElement(document.querySelector(".swipe-footer")).fill("none").duration(500).fromTo("opacity","0","1"),e.next=3,t.play();case 3:this.slideInfo[this.currentSlide].stage==Qt.SELECT&&(Array.from(document.getElementsByClassName("swipe-footer"))[0].style.opacity="1");case 4:case"end":return e.stop()}}),e,this)})))}))}))}},{key:"getSrc",value:function(e){return this.slideInfo[e].stage==Qt.MEMORIZE?this.slideInfo[e].correctFace:this.slideInfo[e].stage==Qt.MASK?this.mask:this.slideInfo[e].displayedFace}},{key:"showFeedback",value:function(){return!this.scoreCardDisplayed()&&(this.slideInfo[this.currentSlide].stage==Qt.CORRECT||this.slideInfo[this.currentSlide].stage==Qt.INCORRECT)}},{key:"scoreCardDisplayed",value:function(){return this.currentSlide>=this.taskLength}},{key:"changeSlide",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.slideElement.getActiveIndex();case 2:if(e.t0=e.sent,e.t1=this.currentSlide,!(e.t0>e.t1)){e.next=17;break}return e.next=7,this.slideElement.getActiveIndex();case 7:return this.currentSlide=e.sent,e.next=10,this.slideElement.lockSwipes(!0);case 10:return e.next=12,this.changeScore.stop();case 12:return e.next=14,this.fadeIn.stop();case 14:for(t=Array.from(document.getElementsByClassName("footer")),n=0;n<t.length;n++)t[n].style.opacity="0";this.scoreCardDisplayed()||this.startMemorizeTimer();case 17:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||Gt)},Gt.\u0275cmp=f.Ob({type:Gt,selectors:[["app-same-different"]],viewQuery:function(e,t){var n;1&e&&f.Bc(Wt,!0),2&e&&f.qc(n=f.gc())&&(t.slideElement=n.first)},inputs:{facePaths:"facePaths"},outputs:{finished:"finished"},decls:9,vars:12,consts:[[3,"ngClass"],[2,"margin-top","0px",3,"value"],[4,"ngIf"],["class","overlay","button","",3,"click",4,"ngIf"],[3,"ionSlideDidChange"],["slideElement",""],["class","flex-slide",3,"swipeleft","swiperight",4,"ngFor","ngForOf"],[3,"score","length","assessment","finished"],[1,"score-banner"],[1,"score-change"],["button","",1,"overlay",3,"click"],[1,"overlay-content"],[1,"flex-slide",3,"swipeleft","swiperight"],["class","prompt",4,"ngIf"],["class","swipe-card",4,"ngIf"],["class","swipe-footer",4,"ngIf"],["style","height: 100%; width: 100%; padding-top: 20%; text-align: center; margin: 0 auto",4,"ngIf"],[1,"prompt"],[1,"time-left"],[1,"swipe-card"],["color","dark","name","arrow-back","style","font-size: 150%",3,"click",4,"ngIf"],["style","height: 270px",3,"src","ngStyle",4,"ngIf"],["color","dark","name","arrow-forward","style","font-size: 150%",3,"click",4,"ngIf"],["color","dark","name","arrow-back",2,"font-size","150%",3,"click"],[2,"height","270px",3,"src","ngStyle"],["color","dark","name","arrow-forward",2,"font-size","150%",3,"click"],[1,"swipe-footer"],["color","primary",3,"click"],["color","secondary",3,"click"],[2,"height","100%","width","100%","padding-top","20%","text-align","center","margin","0 auto"],["class","subheader",4,"ngIf"],[1,"grid-card",2,"--background","gainsboro"],[3,"src"],["lines","none",1,"footer",2,"margin-top","30%"],["slot","end","color","dark","name","arrow-back",2,"margin-top","10px"],[1,"subheader"]],template:function(e,t){1&e&&(f.Xb(0,"ion-content",0),f.Vb(1,"ion-progress-bar",1),f.vc(2,Xt,6,2,"span",2),f.vc(3,Mt,3,1,"div",3),f.Xb(4,"ion-slides",4,5),f.fc("ionSlideDidChange",(function(){return t.changeSlide()})),f.vc(6,Zt,10,9,"ion-slide",6),f.Xb(7,"ion-slide"),f.Xb(8,"app-score-page",7),f.fc("finished",(function(){return t.finished.emit([t.score,2])})),f.Wb(),f.Wb(),f.Wb(),f.Wb()),2&e&&(f.kc("ngClass",f.pc(8,Jt,!t.showFeedback(),t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.CORRECT,t.showFeedback()&&t.slideInfo[t.currentSlide].stage==t.Stage.INCORRECT)),f.Kb(1),f.lc("value",t.progressPercent),f.Kb(1),f.kc("ngIf",!t.scoreCardDisplayed()),f.Kb(1),f.kc("ngIf",t.slideInfo[t.currentSlide].stage==t.Stage.START),f.Kb(3),f.kc("ngForOf",t.slideInfo),f.Kb(2),f.kc("score",t.score)("length",t.taskLength)("assessment",!0))},directives:[s.j,r.h,s.u,r.j,s.B,r.i,s.A,V,s.g,s.m,r.k,s.e,s.o,s.p],styles:[".swipe-card[_ngcontent-%COMP%]{background-color:#dcdcdc;height:310px;width:270px;display:flex;justify-content:space-evenly;align-items:center}.swipe-footer[_ngcontent-%COMP%]{opacity:0;background:transparent;width:100%}"],data:{animation:[Object(Ie.k)("fadeInOut",[Object(Ie.h)("visible",Object(Ie.i)({opacity:.9})),Object(Ie.h)("invisible",Object(Ie.i)({opacity:0})),Object(Ie.j)(":enter",[Object(Ie.e)(500)]),Object(Ie.j)(":leave",[Object(Ie.e)(500)])]),Object(Ie.k)("countdown",[Object(Ie.j)("active <=> inactive",[Object(Ie.e)(200,Object(Ie.f)([Object(Ie.i)({transform:"translateY(0%)",opacity:"1"}),Object(Ie.i)({transform:"translateY(100%)",opacity:"0"}),Object(Ie.i)({transform:"translateY(-100%)",opacity:"0"}),Object(Ie.i)({transform:"translateY(0%)",opacity:"1"})]))])])]}}),Gt);function en(e,t){1&e&&(f.Xb(0,"ion-buttons",12),f.Vb(1,"ion-menu-button",13),f.Wb())}function tn(e,t){if(1&e){var n=f.Yb();f.Xb(0,"ion-icon",14),f.fc("click",(function(){return f.sc(n),f.hc().taskExitAlert()})),f.Wb()}}function nn(e,t){if(1&e){var n=f.Yb();f.Xb(0,"ion-icon",15),f.fc("click",(function(){return f.sc(n),f.hc().getHelp(!1)})),f.Wb()}}function sn(e,t){1&e&&(f.Xb(0,"div",16),f.Vb(1,"ion-spinner",17),f.Wb())}function rn(e,t){if(1&e&&(f.Xb(0,"div"),f.Xb(1,"div",25),f.Xb(2,"b"),f.wc(3),f.Wb(),f.Wb(),f.Xb(4,"div",26),f.wc(5,"Are you ready to train?"),f.Wb(),f.Wb()),2&e){var n=f.hc(3);f.Kb(3),f.yc("Level ",n.userLevel,"")}}function cn(e,t){1&e&&(f.Xb(0,"div"),f.Xb(1,"div",27),f.Xb(2,"b"),f.wc(3,"Pre-Assessment"),f.Wb(),f.Wb(),f.Xb(4,"div",26),f.wc(5,"It looks like you're new, are you ready to begin your pretest?"),f.Wb(),f.Wb())}function an(e,t){1&e&&(f.Xb(0,"div"),f.Xb(1,"div",27),f.Xb(2,"b"),f.wc(3,"Post-Assessment"),f.Wb(),f.Wb(),f.Xb(4,"div",26),f.wc(5,"It looks like you've completed all eight levels, are you ready to begin your post-test?"),f.Wb(),f.Wb())}function on(e,t){if(1&e){var n=f.Yb();f.Xb(0,"div",22),f.vc(1,rn,6,1,"div",23),f.vc(2,cn,6,0,"div",23),f.vc(3,an,6,0,"div",23),f.Vb(4,"br"),f.Xb(5,"ion-button",24),f.fc("click",(function(){return f.sc(n),f.hc(2).clickStart()})),f.wc(6,"Start"),f.Wb(),f.Wb()}if(2&e){var s=f.hc(2);f.Kb(1),f.kc("ngIf",s.userLevel>0&&s.userLevel<9),f.Kb(1),f.kc("ngIf",0==s.userLevel),f.Kb(1),f.kc("ngIf",9==s.userLevel)}}function ln(e,t){if(1&e&&(f.Xb(0,"span"),f.wc(1),f.Wb()),2&e){var n=f.hc(3);f.Kb(1),f.zc(": ",n.scores[n.Task.NAME_FACE],"/",n.taskLengths[n.Task.NAME_FACE],"")}}function fn(e,t){if(1&e&&(f.Xb(0,"span"),f.wc(1),f.Wb()),2&e){var n=f.hc(3);f.Kb(1),f.zc(": ",n.scores[n.Task.WHOS_NEW],"/",n.taskLengths[n.Task.WHOS_NEW],"")}}function hn(e,t){if(1&e&&(f.Xb(0,"span"),f.wc(1),f.Wb()),2&e){var n=f.hc(3);f.Kb(1),f.zc(": ",n.scores[n.Task.MEMORY],"/",n.taskLengths[n.Task.MEMORY],"")}}function un(e,t){if(1&e&&(f.Xb(0,"span"),f.wc(1),f.Wb()),2&e){var n=f.hc(3);f.Kb(1),f.zc(": ",n.scores[n.Task.SHUFFLE],"/",n.taskLengths[n.Task.SHUFFLE],"")}}var dn=function(e,t){return{"task-done":e,"task-failed":t}};function bn(e,t){if(1&e){var n=f.Yb();f.Xb(0,"div",28),f.Xb(1,"div",29),f.wc(2,"What would you like to do next?"),f.Wb(),f.Xb(3,"ion-card",30),f.fc("click",(function(){f.sc(n);var e=f.hc(2);return-1==e.scores[e.Task.NAME_FACE]&&e.renderLevelOneHelp(),e.task=e.Task.NAME_FACE})),f.Vb(4,"ion-icon",31),f.Xb(5,"div"),f.wc(6,"Name and Face"),f.vc(7,ln,2,2,"span",23),f.Wb(),f.Wb(),f.Xb(8,"ion-card",30),f.fc("click",(function(){f.sc(n);var e=f.hc(2);return-1==e.scores[e.Task.WHOS_NEW]&&e.renderLevelOneHelp(),e.task=e.Task.WHOS_NEW})),f.Vb(9,"ion-icon",32),f.Xb(10,"div"),f.wc(11,"Who's New"),f.vc(12,fn,2,2,"span",23),f.Wb(),f.Wb(),f.Xb(13,"ion-card",30),f.fc("click",(function(){f.sc(n);var e=f.hc(2);return-1==e.scores[e.Task.MEMORY]&&e.renderLevelOneHelp(),e.task=e.Task.MEMORY})),f.Vb(14,"ion-icon",33),f.Xb(15,"div"),f.wc(16,"Memory Match"),f.vc(17,hn,2,2,"span",23),f.Wb(),f.Wb(),f.Xb(18,"ion-card",30),f.fc("click",(function(){f.sc(n);var e=f.hc(2);return-1==e.scores[e.Task.SHUFFLE]&&e.renderLevelOneHelp(),e.task=e.Task.SHUFFLE})),f.Vb(19,"ion-icon",34),f.Xb(20,"div"),f.wc(21,"Shuffle"),f.vc(22,un,2,2,"span",23),f.Wb(),f.Wb(),f.Xb(23,"ion-button",35),f.fc("click",(function(){f.sc(n);var e=f.hc(2);return e.task=e.Task.LEARNING})),f.Vb(24,"ion-icon",36),f.wc(25," \xa0 "),f.Vb(26,"ion-icon",36),f.Wb(),f.Xb(27,"ion-button",37),f.fc("click",(function(){return f.sc(n),f.hc(2).startAssessmentAlert()})),f.Vb(28,"ion-icon",36),f.Wb(),f.Wb()}if(2&e){var s=f.hc(2);f.Kb(3),f.kc("ngClass",f.oc(12,dn,s.scores[s.Task.NAME_FACE]>=s.taskLengths[s.Task.NAME_FACE]*s.minTrainScore,s.scores[s.Task.NAME_FACE]>-1&&s.scores[s.Task.NAME_FACE]<s.taskLengths[s.Task.NAME_FACE]*s.minTrainScore)),f.Kb(4),f.kc("ngIf",s.scores[s.Task.NAME_FACE]>-1),f.Kb(1),f.kc("ngClass",f.oc(15,dn,s.scores[s.Task.WHOS_NEW]>=s.taskLengths[s.Task.WHOS_NEW]*s.minTrainScore,s.scores[s.Task.WHOS_NEW]>-1&&s.scores[s.Task.WHOS_NEW]<s.taskLengths[s.Task.WHOS_NEW]*s.minTrainScore)),f.Kb(4),f.kc("ngIf",s.scores[s.Task.WHOS_NEW]>-1),f.Kb(1),f.kc("ngClass",f.oc(18,dn,s.scores[s.Task.MEMORY]>=s.taskLengths[s.Task.MEMORY]*s.minTrainScore,s.scores[s.Task.MEMORY]>-1&&s.scores[s.Task.MEMORY]<s.taskLengths[s.Task.MEMORY]*s.minTrainScore)),f.Kb(4),f.kc("ngIf",s.scores[s.Task.MEMORY]>-1),f.Kb(1),f.kc("ngClass",f.oc(21,dn,s.scores[s.Task.SHUFFLE]>=s.taskLengths[s.Task.SHUFFLE]*s.minTrainScore,s.scores[s.Task.SHUFFLE]>-1&&s.scores[s.Task.SHUFFLE]<s.taskLengths[s.Task.SHUFFLE]*s.minTrainScore)),f.Kb(4),f.kc("ngIf",s.scores[s.Task.SHUFFLE]>-1),f.Kb(2),f.kc("src",s.replay_icon),f.Kb(2),f.kc("src",s.face_icon),f.Kb(1),f.kc("disabled",s.trainingNotDone()),f.Kb(1),f.kc("src",s.assessment_icon)}}function gn(e,t){if(1&e&&(f.Xb(0,"span"),f.wc(1),f.Wb()),2&e){var n=f.hc(3);f.Kb(1),f.zc(": ",n.scores[n.Task.FORCED_CHOICE],"/",n.taskLengths[n.Task.FORCED_CHOICE],"")}}function mn(e,t){if(1&e&&(f.Xb(0,"span"),f.wc(1),f.Wb()),2&e){var n=f.hc(3);f.Kb(1),f.zc(": ",n.scores[n.Task.SAME_DIFFERENT],"/",n.taskLengths[n.Task.SAME_DIFFERENT],"")}}var vn=function(e){return{"task-done":e}};function pn(e,t){if(1&e){var n=f.Yb();f.Xb(0,"div",28),f.Xb(1,"div",29),f.wc(2,"What would you like to do next?"),f.Wb(),f.Xb(3,"ion-card",30),f.fc("click",(function(){f.sc(n);var e=f.hc(2);return-1==e.scores[4]&&(e.task=e.Task.FORCED_CHOICE),e.renderLevelOneHelp()})),f.Vb(4,"ion-icon",38),f.Xb(5,"div"),f.wc(6,"Forced Choice"),f.vc(7,gn,2,2,"span",23),f.Wb(),f.Wb(),f.Xb(8,"ion-card",30),f.fc("click",(function(){f.sc(n);var e=f.hc(2);return-1==e.scores[5]&&(e.task=e.Task.SAME_DIFFERENT),e.renderLevelOneHelp()})),f.Vb(9,"ion-icon",39),f.Xb(10,"div"),f.wc(11,"Same Different"),f.vc(12,mn,2,2,"span",23),f.Wb(),f.Wb(),f.Wb()}if(2&e){var s=f.hc(2);f.Kb(3),f.kc("ngClass",f.nc(4,vn,-1!=s.scores[4])),f.Kb(4),f.kc("ngIf",s.scores[4]>-1),f.Kb(1),f.kc("ngClass",f.nc(6,vn,-1!=s.scores[5])),f.Kb(4),f.kc("ngIf",s.scores[5]>-1)}}function kn(e,t){if(1&e){var n=f.Yb();f.Xb(0,"div",47),f.Xb(1,"div",26),f.wc(2,"You've entered level 1! Tap to begin your training."),f.Wb(),f.Xb(3,"ion-button",24),f.fc("click",(function(){return f.sc(n),f.hc(4).initCurrentLevel()})),f.wc(4,"Train"),f.Wb(),f.Wb()}}function Sn(e,t){1&e&&(f.Xb(0,"div",47),f.Xb(1,"div",26),f.wc(2,"You've moved on to the next level! Come back tomorrow for your next training."),f.Wb(),f.Xb(3,"ion-button",48),f.wc(4,"Home"),f.Wb(),f.Wb())}function In(e,t){if(1&e){var n=f.Yb();f.Xb(0,"div",47),f.Xb(1,"div",26),f.wc(2,"You've completed all eight levels! Now it's time for your post-assessment."),f.Wb(),f.Xb(3,"ion-button",24),f.fc("click",(function(){return f.sc(n),f.hc(4).initCurrentLevel()})),f.wc(4,"Post-Assessment"),f.Wb(),f.Wb()}}function wn(e,t){if(1&e&&(f.Xb(0,"div",42),f.Xb(1,"div",25),f.Xb(2,"b"),f.wc(3,"Finished!"),f.Wb(),f.Wb(),f.Vb(4,"ion-progress-bar",43),f.Xb(5,"div",44),f.wc(6,"Level "),f.Xb(7,"span",45),f.wc(8),f.Wb(),f.Wb(),f.vc(9,kn,5,0,"div",46),f.vc(10,Sn,5,0,"div",46),f.vc(11,In,5,0,"div",46),f.Wb()),2&e){var n=f.hc(3);f.Kb(4),f.lc("value",n.progress),f.Kb(4),f.xc(n.userLevel),f.Kb(1),f.kc("ngIf",1==n.userLevel),f.Kb(1),f.kc("ngIf",n.userLevel>0&&n.userLevel<9),f.Kb(1),f.kc("ngIf",9==n.userLevel)}}function yn(e,t){1&e&&(f.Xb(0,"div"),f.Xb(1,"div",25),f.Xb(2,"b"),f.wc(3,"You're all done."),f.Wb(),f.Wb(),f.Xb(4,"div",26),f.wc(5,"Since you've completed all eight levels and the post assessment, you don't have anything else to do! Thank you for your participation in this research."),f.Wb(),f.Xb(6,"ion-button",48),f.wc(7,"Home"),f.Wb(),f.Wb())}function On(e,t){if(1&e&&(f.Xb(0,"div",40),f.vc(1,wn,12,5,"div",41),f.vc(2,yn,8,0,"div",23),f.Wb()),2&e){var n=f.hc(2);f.Kb(1),f.kc("ngIf",n.userLevel<=9),f.Kb(1),f.kc("ngIf",n.userLevel>9)}}function Cn(e,t){if(1&e&&(f.Xb(0,"div",18),f.vc(1,on,7,3,"div",19),f.vc(2,bn,29,24,"div",20),f.vc(3,pn,13,8,"div",20),f.vc(4,On,3,2,"div",21),f.Wb()),2&e){var n=f.hc();f.Kb(1),f.kc("ngIf",n.stage==n.Stage.START),f.Kb(1),f.kc("ngIf",n.stage==n.Stage.TRAINING),f.Kb(1),f.kc("ngIf",n.stage==n.Stage.ASSESSMENT),f.Kb(1),f.kc("ngIf",n.stage==n.Stage.DONE)}}function En(e,t){if(1&e){var n=f.Yb();f.Xb(0,"app-learning-task",49),f.fc("finished",(function(){f.sc(n);var e=f.hc();return e.learningDone=!0,e.iterateStage()})),f.Wb()}if(2&e){var s=f.hc();f.kc("setNames",s.setNames)("facePaths",s.trainingFacePaths)}}function Tn(e,t){if(1&e){var n=f.Yb();f.Xb(0,"app-name-face",49),f.fc("finished",(function(e){return f.sc(n),f.hc().finished(e,0)})),f.Wb()}if(2&e){var s=f.hc();f.kc("setNames",s.setNames)("facePaths",s.trainingFacePaths)}}function Rn(e,t){if(1&e){var n=f.Yb();f.Xb(0,"app-whos-new",50),f.fc("finished",(function(e){return f.sc(n),f.hc().finished(e,1)})),f.Wb()}if(2&e){var s=f.hc();f.kc("facePaths",s.trainingFacePaths)("newFacePaths",s.whosNewFacePaths)}}function Fn(e,t){if(1&e){var n=f.Yb();f.Xb(0,"app-memory-match",51),f.fc("finished",(function(e){return f.sc(n),f.hc().finished(e,2)})),f.Wb()}if(2&e){var s=f.hc();f.kc("facePaths",s.trainingFacePaths)}}function xn(e,t){if(1&e){var n=f.Yb();f.Xb(0,"app-shuffle",51),f.fc("finished",(function(e){return f.sc(n),f.hc().finished(e,3)})),f.Wb()}if(2&e){var s=f.hc();f.kc("facePaths",s.trainingFacePaths)}}function Wn(e,t){if(1&e){var n=f.Yb();f.Xb(0,"app-forced-choice",51),f.fc("finished",(function(e){return f.sc(n),f.hc().finished(e,4)})),f.Wb()}if(2&e){var s=f.hc();f.kc("facePaths",s.assessmentFacePaths)}}function Xn(e,t){if(1&e){var n=f.Yb();f.Xb(0,"app-same-different",51),f.fc("finished",(function(e){return f.sc(n),f.hc().finished(e,5)})),f.Wb()}if(2&e){var s=f.hc();f.kc("facePaths",s.assessmentFacePaths)}}function Mn(e,t){if(1&e){var n=f.Yb();f.Xb(0,"app-same-different",51),f.fc("finished",(function(e){return f.sc(n),f.hc().finishPrePost(e)})),f.Wb()}if(2&e){var s=f.hc();f.kc("facePaths",s.assessmentFacePaths)}}var An,Kn,jn=function(e){return{"blue-border":e}},Pn=function(e){return e[e.BLACK=0]="BLACK",e[e.ASIAN=1]="ASIAN",e}({}),Nn=function(e){return e[e.START=0]="START",e[e.TRAINING=1]="TRAINING",e[e.ASSESSMENT=2]="ASSESSMENT",e[e.DONE=3]="DONE",e}({}),Ln=function(e){return e[e.NAME_FACE=0]="NAME_FACE",e[e.WHOS_NEW=1]="WHOS_NEW",e[e.MEMORY=2]="MEMORY",e[e.SHUFFLE=3]="SHUFFLE",e[e.FORCED_CHOICE=4]="FORCED_CHOICE",e[e.SAME_DIFFERENT=5]="SAME_DIFFERENT",e[e.PRETEST=6]="PRETEST",e[e.POSTTEST=7]="POSTTEST",e[e.LEARNING=8]="LEARNING",e}({}),_n={0:{race:Pn.BLACK,namePool:{1:["James","John","Robert","Michael","Will","David","Richard","Joseph"],2:["Thomas","Charlie","Chris","Daniel","Matthew","Anthony","Don","Mark"],3:["Paul","Steven","Andrew","Ken","Joshua","George","Kevin","Brian"],4:["Edward","Ron","Tim","Jason","Jeff","Ryan","Jacob","Gary"],5:["Nick","Eric","Stephen","Jonathan","Larry","Justin","Scott","Brandon"],6:["Frank","Ben","Greg","Sam","Ray","Patrick","Alex","Jack"],7:["Dennis","Jerry","Tyler","Aaron","Jose","Henry","Doug","Adam"],8:["Peter","Nathan","Zach","Walter","Kyle","Harry","Carl","Jeremy"]}}},Yn=((Kn=function(){function e(t,n,s,i,r,c,a,o){_classCallCheck(this,e),this.alertController=t,this.modalController=n,this.routerOutlet=s,this.getProgress=i,this.submitScores=r,this.toastController=c,this.localNotifications=a,this.http=o,this.Race=Pn,this.Stage=Nn,this.Task=Ln,this.stage=null,this.task=null,this.learningDone=!1,this.scores=[-1,-1,-1,-1,-1,-1],this.minTrainScore=.75,this.taskLengths=[8,8,32,16,8,8],this.numFaces=8,this.assessmentPoolSize=30,this.assessment_icon="assets/icon/assessment.svg",this.replay_icon="assets/icon/replay.svg",this.face_icon="assets/icon/face.svg",this.routerOutlet.swipeGesture=!1}return _createClass(e,[{key:"ionViewWillEnter",value:function(){var e=this;this.stage=null,this.task=null,Object(o.a)(500).subscribe((function(){e.currentRace=Pn.BLACK,e.initCurrentLevel()}))}},{key:"ionViewWillLeave",value:function(){Array.from(document.getElementsByClassName("fade-in"))[0].style.opacity="0"}},{key:"ngAfterViewInit",value:function(){var e=this;0==this.userLevel&&Object(o.a)(500).subscribe((function(){e.getHelp(!0)}))}},{key:"initCurrentLevel",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn.BLACK;this.currentRace=t,this.getProgress.getData().subscribe((function(t){var n=t.days;e.userLevel=t.level;var s=!1;if(0==e.userLevel||9==e.userLevel)e.getPrePostAssessmentFaces().then((function(t){e.assessmentFacePaths=t,Object(o.a)(1e3).subscribe((function(){e.stage=Nn.START}))}));else if(e.userLevel>0&&e.userLevel<9){var i=(new Date).toLocaleDateString(),r="";for(var c in n)[n[c].nameface,n[c].whosnew,n[c].memory,n[c].shuffle,n[c].forcedchoice,n[c].samedifferent].indexOf(-1)<0&&(r=new Date(n[c].date).toLocaleDateString());i==r&&(s=!0),s?(e.userLevel--,e.finishLevel()):(e.setNames=_n[e.currentRace].namePool[e.userLevel],e.getTrainingFaces().then((function(t){e.trainingFacePaths=t,e.getWhosNewFaces().then((function(t){e.whosNewFacePaths=t,e.getDailyAssessmentFaces().then((function(t){e.assessmentFacePaths=t,n[e.userLevel-1]&&(e.scores=[n[e.userLevel-1].nameface,n[e.userLevel-1].whosnew,n[e.userLevel-1].memory,n[e.userLevel-1].shuffle,n[e.userLevel-1].forcedchoice,n[e.userLevel-1].samedifferent],e.learningDone=e.scores.indexOf(-1)>-1),Object(o.a)(1e3).subscribe((function(){e.iterateStage()}))}))}))})))}else e.stage=Nn.DONE;var a=[];a.push(new Image),a[a.length-1].src="assets/background_imgs/mask1.png"}),(function(t){return Object(a.b)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toastController.create({message:"Something went wrong. Please try logging out and back in",color:"danger",duration:2e3});case 2:e.sent.present();case 3:case"end":return e.stop()}}),e,this)})))}))}},{key:"iterateStage",value:function(){this.task=null,this.learningDone?this.trainingNotDone()?(this.stage=Nn.TRAINING,-1==this.scores[Ln.NAME_FACE]&&-1==this.scores[Ln.WHOS_NEW]&&-1==this.scores[Ln.MEMORY]&&-1==this.scores[Ln.SAME_DIFFERENT]&&this.renderLevelOneHelp()):this.scores.includes(-1)?(this.stage=Nn.ASSESSMENT,-1==this.scores[Ln.FORCED_CHOICE]&&-1==this.scores[Ln.SAME_DIFFERENT]&&this.renderLevelOneHelp()):(this.finishLevel(),this.scheduleNotification()):this.stage=Nn.START}},{key:"getTitle",value:function(){switch(this.task){case null:switch(this.stage){case Nn.START:return"Start";case Nn.TRAINING:return"Training Tasks";case Nn.ASSESSMENT:return"Assessment Tasks";case Nn.DONE:return"Finish";default:return"Modules"}case Ln.LEARNING:return"Meet Today's Faces";case Ln.NAME_FACE:return"Name and Face";case Ln.WHOS_NEW:return"Who's New?";case Ln.MEMORY:return"Memory Match";case Ln.SHUFFLE:return"Shuffle";case Ln.FORCED_CHOICE:return"Forced Choice";case Ln.SAME_DIFFERENT:return"Same-Different";case Ln.PRETEST:return"Pre-Assessment";case Ln.POSTTEST:return"Post-Assessment";default:return"Modules"}}},{key:"getHelp",value:function(e){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({component:I,componentProps:{paramTask:this.getTitle(),displayFirst:e}});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"renderLevelOneHelp",value:function(){var e=this;1==this.userLevel&&Object(o.a)(500).subscribe((function(){e.getHelp(!0)}))}},{key:"getTrainingFaces",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,s,i,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=!0,s=0;case 2:if(!(s<8)){e.next=11;break}if(i=sessionStorage.getItem("training"+s)){e.next=7;break}return n=!1,e.abrupt("break",11);case 7:t.push(i);case 8:s++,e.next=2;break;case 11:if(n){e.next=16;break}return t=[],r={headers:new x.c({"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+localStorage.getItem("token")})},e.next=16,this.http.put("https://crossfacerecognition.herokuapp.com/getTrainingFaces/",{level:this.userLevel},r).subscribe((function(e){for(var n=0;n<8;n++)t.push("data:image/png;base64,"+e.images[n]),sessionStorage.setItem("training"+n,"data:image/png;base64,"+e.images[n])}));case 16:return e.abrupt("return",t);case 17:case"end":return e.stop()}}),e,this)})))}},{key:"getWhosNewFaces",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n={headers:new x.c({"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+localStorage.getItem("token")})},e.next=4,this.http.put("https://crossfacerecognition.herokuapp.com/getWhosNewFaces/",{level:this.userLevel},n).subscribe((function(e){for(var n=0;n<8;n++)t.push("data:image/png;base64,"+e.images[n])}));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"getDailyAssessmentFaces",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,s,i,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=!0,s=0;case 2:if(!(s<8)){e.next=11;break}if(i=sessionStorage.getItem("dailyAssessment"+s)){e.next=7;break}return n=!1,e.abrupt("break",11);case 7:t.push(i);case 8:s++,e.next=2;break;case 11:if(n){e.next=16;break}return t=[],r={headers:new x.c({"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+localStorage.getItem("token")})},e.next=16,this.http.put("https://crossfacerecognition.herokuapp.com/getDailyAssessmentFaces/",{},r).subscribe((function(e){for(var n=0;n<8;n++)t.push("data:image/jpg;base64,"+e.images[n]),sessionStorage.setItem("dailyAssessment"+n,"data:image/jpg;base64,"+e.images[n])}));case 16:return e.abrupt("return",t);case 17:case"end":return e.stop()}}),e,this)})))}},{key:"getPrePostAssessmentFaces",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n={headers:new x.c({"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+localStorage.getItem("token")})},e.next=4,this.http.put("https://crossfacerecognition.herokuapp.com/getPrePostAssessmentFaces/",{},n).subscribe((function(e){for(var n=0;n<30;n++)t.push("data:image/jpg;base64,"+e.images[n])}));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"finished",value:function(e,t){this.scores[t]=Math.max(e[0],this.scores[t]),0!=e[1]&&(this.task=1==e[1]?Ln.LEARNING:null,4!=t&&5!=t||this.iterateStage()),this.submitScores.submitTaskScores(this.userLevel,this.scores)}},{key:"finishPrePost",value:function(e){0==this.userLevel?this.submitScores.submitPreAssessment(e[0]):9==this.userLevel&&this.submitScores.submitPostAssessment(e[0]),this.finishLevel()}},{key:"taskExitAlert",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"Quit",message:"Do you want to quit? Your progress on this task will be lost.",buttons:[{text:"Cancel"},{text:"Quit",handler:function(){Object(o.a)(500).subscribe((function(){n.task=null}))}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"startAssessmentAlert",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"Assessment",message:"Do you want to move on to the assessment? You will not be able to come back to training today.",buttons:[{text:"Cancel"},{text:"Go",handler:function(){Object(o.a)(500).subscribe((function(){n.iterateStage()}))}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"clickStart",value:function(){var e=this;0==this.userLevel?(this.task=Ln.PRETEST,Object(o.a)(500).subscribe((function(){e.getHelp(!0)}))):9==this.userLevel?this.task=Ln.POSTTEST:this.userLevel>0&&this.userLevel<9&&(this.task=Ln.LEARNING,this.renderLevelOneHelp())}},{key:"finishLevel",value:function(){var e=this;this.stage=Nn.DONE;var t=this.task;this.task=null,t!=Ln.POSTTEST?(this.progress=0,Object(o.a)(1200).subscribe((function(){return Object(a.b)(e,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.userLevel++,t=Object(R.h)().addElement(document.querySelector(".level")).fill("none").duration(500).keyframes([{offset:0,transform:"scale(1, 1)"},{offset:.5,transform:"scale(2, 2)"},{offset:1,transform:"scale(1, 1)"}]),e.next=4,t.play();case 4:Object(o.a)(500).subscribe((function(){return Object(a.b)(n,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(R.h)().addElement(document.querySelector(".fade-in")).fill("none").duration(500).fromTo("opacity","0","1"),e.next=3,t.play();case 3:Array.from(document.getElementsByClassName("fade-in"))[0].style.opacity="1";case 4:case"end":return e.stop()}}),e)})))}));case 5:case"end":return e.stop()}}),e,this)})))})),Object(l.a)(100).pipe(O(Object(o.a)(1100))).subscribe((function(){e.progress+=.1}))):this.userLevel++}},{key:"trainingNotDone",value:function(){return this.scores[Ln.NAME_FACE]<this.taskLengths[Ln.NAME_FACE]*this.minTrainScore||this.scores[Ln.WHOS_NEW]<this.taskLengths[Ln.WHOS_NEW]*this.minTrainScore||this.scores[Ln.MEMORY]<this.taskLengths[Ln.MEMORY]*this.minTrainScore||this.scores[Ln.SHUFFLE]<this.taskLengths[Ln.SHUFFLE]*this.minTrainScore}},{key:"scheduleNotification",value:function(){var e=new Date;e.setMinutes(0),e.setSeconds(0),e.setHours(8),e.setDate(e.getDate()+1),this.localNotifications.schedule({id:1,text:"You're next training is now available!",foreground:!0,trigger:{at:e}})}}]),e}()).\u0275fac=function(e){return new(e||Kn)(f.Ub(s.a),f.Ub(s.I),f.Ub(s.w),f.Ub(F.a),f.Ub(W),f.Ub(s.P),f.Ub(X.a),f.Ub(x.a))},Kn.\u0275cmp=f.Ob({type:Kn,selectors:[["app-training"]],decls:46,vars:17,consts:[[2,"--background","gray","height","100%"],[3,"ngClass"],["slot","start",4,"ngIf"],["slot","start","color","medium","name","arrow-back","style","margin-left: 1vw; height: 3vh",3,"click",4,"ngIf"],["slot","end","color","medium","name","help-circle","style","margin-right: 1vw; height: 3vh",3,"click",4,"ngIf"],["style","height: 90%; display: flex; justify-content: center; align-items: center",4,"ngIf"],["style","color: white; text-align: center",4,"ngIf"],[3,"setNames","facePaths","finished",4,"ngIf"],[3,"facePaths","newFacePaths","finished",4,"ngIf"],[3,"facePaths","finished",4,"ngIf"],[2,"text-align","center"],[3,"click"],["slot","start"],["autoHide","false"],["slot","start","color","medium","name","arrow-back",2,"margin-left","1vw","height","3vh",3,"click"],["slot","end","color","medium","name","help-circle",2,"margin-right","1vw","height","3vh",3,"click"],[2,"height","90%","display","flex","justify-content","center","align-items","center"],["name","crescent","color","light"],[2,"color","white","text-align","center"],["style","margin-top: 50%",4,"ngIf"],["style","margin-top: 20px",4,"ngIf"],["style","margin-top: 40%",4,"ngIf"],[2,"margin-top","50%"],[4,"ngIf"],["color","success",3,"click"],[1,"header",2,"margin","5%"],[1,"subheader",2,"margin","5%"],[1,"header"],[2,"margin-top","20px"],[2,"font-size","6vw"],["button","",3,"ngClass","click"],["slot","start","name","happy",2,"font-size","300%"],["slot","start","name","person-add",2,"font-size","300%"],["slot","start","name","grid",2,"font-size","300%"],["slot","start","name","swap",2,"font-size","300%"],[2,"padding","0","margin","1%",3,"click"],[3,"src"],[2,"padding","0","margin","1%",3,"disabled","click"],["slot","start","name","checkmark-circle",2,"font-size","300%"],["slot","start","name","contacts",2,"font-size","300%"],[2,"margin-top","40%"],["style","display: flex; flex-direction: column; justify-content: center; align-items: center",4,"ngIf"],[2,"display","flex","flex-direction","column","justify-content","center","align-items","center"],[2,"width","80%",3,"value"],[2,"margin-top","5%","font-size","4vh"],[1,"level"],["class","fade-in",4,"ngIf"],[1,"fade-in"],["color","success","routerLink","/dashboard","routerDirection","forward"],[3,"setNames","facePaths","finished"],[3,"facePaths","newFacePaths","finished"],[3,"facePaths","finished"]],template:function(e,t){1&e&&(f.Xb(0,"ion-content",0),f.Xb(1,"ion-header"),f.Xb(2,"ion-toolbar",1),f.Xb(3,"ion-title"),f.wc(4),f.Wb(),f.vc(5,en,2,0,"ion-buttons",2),f.vc(6,tn,1,0,"ion-icon",3),f.vc(7,nn,1,0,"ion-icon",4),f.Wb(),f.Wb(),f.vc(8,sn,2,0,"div",5),f.vc(9,Cn,5,4,"div",6),f.vc(10,En,1,2,"app-learning-task",7),f.vc(11,Tn,1,2,"app-name-face",7),f.vc(12,Rn,1,2,"app-whos-new",8),f.vc(13,Fn,1,1,"app-memory-match",9),f.vc(14,xn,1,1,"app-shuffle",9),f.vc(15,Wn,1,1,"app-forced-choice",9),f.vc(16,Xn,1,1,"app-same-different",9),f.vc(17,Mn,1,1,"app-same-different",9),f.wc(18," For development only "),f.Xb(19,"div",10),f.Vb(20,"br"),f.Vb(21,"br"),f.Vb(22,"br"),f.Vb(23,"br"),f.Vb(24,"br"),f.Vb(25,"br"),f.Vb(26,"br"),f.Vb(27,"br"),f.Vb(28,"br"),f.Vb(29,"br"),f.Vb(30,"br"),f.Vb(31,"br"),f.Xb(32,"ion-button",11),f.fc("click",(function(){return t.task=t.Task.LEARNING})),f.wc(33,"Learning"),f.Wb(),f.Xb(34,"ion-button",11),f.fc("click",(function(){return t.task=t.Task.NAME_FACE})),f.wc(35,"Name and Face"),f.Wb(),f.Xb(36,"ion-button",11),f.fc("click",(function(){return t.task=t.Task.WHOS_NEW})),f.wc(37,"Who's New"),f.Wb(),f.Xb(38,"ion-button",11),f.fc("click",(function(){return t.task=t.Task.MEMORY})),f.wc(39,"Memory"),f.Wb(),f.Xb(40,"ion-button",11),f.fc("click",(function(){return t.task=t.Task.SHUFFLE})),f.wc(41,"Shuffle"),f.Wb(),f.Xb(42,"ion-button",11),f.fc("click",(function(){return t.task=t.Task.FORCED_CHOICE})),f.wc(43,"Forced Choice"),f.Wb(),f.Xb(44,"ion-button",11),f.fc("click",(function(){return t.task=t.Task.SAME_DIFFERENT})),f.wc(45,"Same Different"),f.Wb(),f.Wb(),f.Wb()),2&e&&(f.Kb(2),f.kc("ngClass",f.nc(15,jn,null==t.task)),f.Kb(2),f.xc(t.getTitle()),f.Kb(1),f.kc("ngIf",null==t.task),f.Kb(1),f.kc("ngIf",null!=t.task&&t.task!=t.Task.FORCED_CHOICE&&t.task!=t.Task.SAME_DIFFERENT&&t.task!=t.Task.PRETEST&&t.task!=t.Task.POSTTEST),f.Kb(1),f.kc("ngIf",t.userLevel<=9),f.Kb(1),f.kc("ngIf",null==t.stage),f.Kb(1),f.kc("ngIf",null==t.task),f.Kb(1),f.kc("ngIf",t.task==t.Task.LEARNING),f.Kb(1),f.kc("ngIf",t.task==t.Task.NAME_FACE),f.Kb(1),f.kc("ngIf",t.task==t.Task.WHOS_NEW),f.Kb(1),f.kc("ngIf",t.task==t.Task.MEMORY),f.Kb(1),f.kc("ngIf",t.task==t.Task.SHUFFLE),f.Kb(1),f.kc("ngIf",t.task==t.Task.FORCED_CHOICE),f.Kb(1),f.kc("ngIf",t.task==t.Task.SAME_DIFFERENT),f.Kb(1),f.kc("ngIf",t.task==t.Task.PRETEST||t.task==t.Task.POSTTEST))},directives:[s.j,s.l,s.F,r.h,s.D,r.j,s.e,s.f,s.s,s.m,s.C,s.g,s.u,s.M,i.h,N,re,Se,ze,ht,xt,$t],styles:[".task-done[_ngcontent-%COMP%]{--background:#8ecf8e!important;color:#000}.task-failed[_ngcontent-%COMP%]{--background:#c98b8b!important;color:#000}.blue-border[_ngcontent-%COMP%]{border-bottom:solid #1e90ff}.fade-in[_ngcontent-%COMP%], .level[_ngcontent-%COMP%]{display:inline-block}.fade-in[_ngcontent-%COMP%]{opacity:0}ion-card[_ngcontent-%COMP%]{--background:#dcdcdc;color:#1e90ff;border-radius:6vh;margin-top:5vh;margin-bottom:5vh;padding-top:1vh;padding-bottom:1vh;font-size:2.2vh;height:11vh}ion-button[_ngcontent-%COMP%]{text-transform:none!important;height:8vh;font-size:3vh}"]}),Kn),Dn=((An=function e(){_classCallCheck(this,e)}).\u0275mod=f.Sb({type:An}),An.\u0275inj=f.Rb({factory:function(e){return new(e||An)},providers:[X.a],imports:[[s.G,r.b,c.d,c.i,i.i.forChild([{path:"",component:Yn}])]]}),An)}}]);